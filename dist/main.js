(()=>{"use strict";var e={380:(e,t,r)=>{var o=r(555);const a=e=>{const t=document.querySelector(e);t.textContent="";for(let e=0;e<10;e+=1)for(let r=0;r<10;r+=1){const o=document.createElement("div");o.classList.add("square"),o.dataset.row=e,o.dataset.col=r,t.appendChild(o)}},l=(e,t)=>{document.querySelector(e).querySelectorAll(".square").forEach((e=>{t.forEach((t=>{e.addEventListener(t.eventType,t.handler)}))}))},n=e=>{document.querySelector("#winner").textContent=`${e} won!`},s=e=>{document.querySelector(e).querySelectorAll(".square").forEach((e=>{e.className="square"}))};var c=r(776);(()=>{const e=(0,c.Br)(),t=(0,c.Br)(),r=(0,c.oP)("computer");let d=0,i=!0,u=!1,h=null;const p=a=>{if(!i){const l=a.target,s=parseInt(l.dataset.row,10),c=parseInt(l.dataset.col,10),d=o.r.convertToAlphanumeric([s,c]);if(!t.getAttackedCoordinates().includes(d)){const a=t.receiveAttack(d);console.log(a),a?l.classList.add("hit"):l.classList.add("miss"),t.allShipsSunk()&&(h="You",n(h),o.U.toggleModal(document.querySelector(".modal.endgame"),"show")),(()=>{if(!i){const t=r.attack(e),a=e.receiveAttack(t),l=parseInt(t.slice(1),10)-1,s=t[0].charCodeAt(0)-65,c=document.querySelector(`.gameboard.player [data-row="${l}"][data-col="${s}"]`);a?c.classList.add("hit"):c.classList.add("miss"),e.allShipsSunk()&&(h="The computer",n(h),o.U.toggleModal(document.querySelector(".modal.endgame"),"show"))}})()}}},m=()=>{u=!u},g=[{eventType:"mouseover",handler:e=>{if(i){const t=e.target,r=parseInt(t.dataset.row,10),a=parseInt(t.dataset.col,10),{length:l}=o.U.shipTypes[d];Array.from({length:l},((e,t)=>{const o=u?r+t:r,l=u?a:a+t;return{initialSquare:document.querySelector(`.gameboard.initial [data-row="${o}"][data-col="${l}"]`)}})).forEach((({initialSquare:e})=>{e&&e.classList.add("hovered")}))}}},{eventType:"mouseleave",handler:()=>{document.querySelectorAll(".gameboard .hovered").forEach((e=>{e.classList.remove("hovered")}))}},{eventType:"click",handler:r=>{if(i){const a=r.target,l=parseInt(a.dataset.row,10),n=parseInt(a.dataset.col,10),{length:s}=o.U.shipTypes[d],h=Array.from({length:s},((e,t)=>[u?l+t:l,u?n:n+t])),p=(0,c._V)(s);if(e.placeShip(p,h))if(a.classList.add("placed"),h.forEach((([e,t])=>{document.querySelector(`[data-row="${e}"][data-col="${t}"]`).classList.add("placed"),document.querySelector(`.gameboard.initial [data-row="${e}"][data-col="${t}"]`).classList.add("placed")})),d+=1,d===o.U.shipTypes.length)i=!1,(()=>{const e=[];for(let r=0;r<o.U.shipTypes.length;r+=1){const{type:a,length:l}=o.U.shipTypes[r];let n=[],s=!1;for(;!s;){const e=Math.floor(10*Math.random()),r=Math.floor(10*Math.random());u=Math.random()<.5,n=[],u?e+l-1<10&&(n=Array.from({length:l},((t,o)=>[e+o,r]))):r+l-1<10&&(n=Array.from({length:l},((t,o)=>[e,r+o]))),n.length>0&&(s=t.placeShip((0,c._V)(l),n))}n.forEach((([e,t])=>{document.querySelector(`.gameboard.computer [data-row="${e}"][data-col="${t}"]`).classList.add("placed")})),e.push({type:a,coordinates:n})}})(),setTimeout((()=>{o.U.toggleModal(document.querySelector(".modal.initial"),"hide")}),500);else{const e=o.U.shipTypes[d].type;document.querySelector(".ship-type").textContent=e}}}}];return{init:()=>{o.U.toggleModal(document.querySelector(".modal.endgame"),"hide"),a(".gameboard.initial"),a(".gameboard.player"),a(".gameboard.computer"),l(".gameboard.initial",g),document.querySelectorAll(".gameboard.computer .square").forEach((e=>{e.addEventListener("click",p)})),document.querySelector("#rotateBtn").addEventListener("click",m),document.querySelector("#newGame").addEventListener("click",(()=>{d=0,i=!0,u=!1,h=null,e.reset(),t.reset(),r.clearSet(),s(".gameboard.initial"),s(".gameboard.player"),s(".gameboard.computer"),document.querySelector(".ship-type").textContent=o.U.shipTypes[0].type,o.U.toggleModal(document.querySelector(".modal.endgame"),"hide"),o.U.toggleModal(document.querySelector(".modal.initial"),"show")}))}}})().init()},776:(e,t,r)=>{r.d(t,{Br:()=>l,_V:()=>a,oP:()=>n});var o=r(555);const a=e=>{let t=0;return{length:e,hit:()=>{t+=1},isSunk:()=>t>=e,get hits(){return t}}},l=()=>{const e=10,t=Array.from({length:e},(()=>Array(e).fill(null)));let r=[],a=[];const l=()=>{const r=[];for(let o=0;o<e;o+=1)for(let a=0;a<e;a+=1){const e=t[o][a];null===e||!e.ship||r.includes(e.ship)||e.ship.isSunk()||r.push(e.ship)}return r};return{getGrid:()=>t,placeShip:(r,o)=>{const a=o.every((([e,t])=>e>0&&e<9&&t>0&&t<9)),l=o.some((([e,r])=>null!==t[e][r])),n=o.some((([r,o])=>[[r-1,o],[r+1,o],[r,o-1],[r,o+1],[r-1,o-1],[r-1,o+1],[r+1,o-1],[r+1,o+1]].some((([r,o])=>r>=0&&r<e&&o>=0&&o<e&&null!==t[r]?.[o]))));if(a&&!l&&!n){const e={ship:r,coordinates:o};return e.coordinates.forEach((([r,o])=>{t[r][o]=e})),!0}return!1},getShips:l,getAllShips:()=>{const r=[];for(let o=0;o<e;o+=1)for(let a=0;a<e;a+=1){const e=t[o][a];null!==e&&e.ship&&!r.includes(e.ship)&&r.push(e.ship)}return console.log(r),r},getShipCoordinates:r=>{const a=[];for(let l=0;l<e;l+=1)for(let n=0;n<e;n+=1){const e=t[l][n];e&&e.ship===r&&a.push(o.r.convertToAlphanumeric([l,n]))}return a},receiveAttack:e=>{const[o,l]=e,n=parseInt(l,10)-1,s=o.charCodeAt(0)-65,c=t[n][s];if(null!==c){const{ship:t}=c;return t.hit(),r.push(e),t}return a.push(e),r.push(e),null},getMissedAttacks:()=>a,getAttackedCoordinates:()=>r,allShipsSunk:()=>l().every((e=>e.isSunk())),reset:()=>{t.forEach(((e,r)=>{e.forEach(((e,o)=>{t[r][o]=null}))})),r=[],a=[]}}},n=e=>{const t=new Set;return{name:e,attack:e=>{const r=e.getGrid().length,a=o.r.getAllValidCoordinates(r);let l="";do{l=a[Math.floor(Math.random()*a.length)]}while(t.has(l)||e.getAttackedCoordinates().includes(l));return t.add(l),l},getAttackedSet:()=>t,clearSet:()=>{t.clear()}}}},555:(e,t,r)=>{r.d(t,{U:()=>a,r:()=>o});const o=(()=>{const e=[],t=([e,t])=>String.fromCharCode(t+65)+(e+1);return{convertToIndices:e=>{const t=e.charCodeAt(0)-65;return[parseInt(e.slice(1),10)-1,t]},convertToAlphanumeric:t,getAllValidCoordinates:r=>{for(let o=0;o<r;o+=1)for(let a=0;a<r;a+=1){const r=t([o,a]);e.push(r)}return e}}})(),a={shipTypes:[{type:"carrier",length:5},{type:"battleship",length:4},{type:"destroyer",length:3},{type:"submarine",length:3},{type:"patrol boat",length:2}],toggleModal:(e,t)=>{const r=e,o="show"===t?"flex":"none";e.closest(".overlay").style.display=o,r.style.display=o}}}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,r),l.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(380),r(776)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFtQkosQ0FDTHRFLFVBbkJnQixDQUNoQixDQUFFWSxLQUFNLFVBQVdiLE9BQVEsR0FDM0IsQ0FBRWEsS0FBTSxhQUFjYixPQUFRLEdBQzlCLENBQUVhLEtBQU0sWUFBYWIsT0FBUSxHQUM3QixDQUFFYSxLQUFNLFlBQWFiLE9BQVEsR0FDN0IsQ0FBRWEsS0FBTSxjQUFlYixPQUFRLElBZS9CUixZQVprQixDQUFDZ0YsRUFBT0MsS0FDMUIsTUFBTUMsRUFBZUYsRUFHZkcsRUFBMEIsU0FBWEYsRUFBb0IsT0FBUyxPQURsQ0QsRUFBTUksUUFBUSxZQUd0QkMsTUFBTUMsUUFBVUgsRUFDeEJELEVBQWFHLE1BQU1DLFFBQVVILENBQVksRSxHQy9DekNJLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVSSxFQUFRQSxFQUFPRCxRQUFTSixHQUcvQ0ssRUFBT0QsT0FDZixDQ3JCQUosRUFBb0JPLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYUixFQUFvQlUsRUFBRUYsRUFBWUMsS0FBU1QsRUFBb0JVLEVBQUVOLEVBQVNLLElBQzVFRSxPQUFPQyxlQUFlUixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsSUFFMUUsRUNORFQsRUFBb0JVLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NFbEZoQixFQUFvQixLQUVNQSxFQUFvQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9mYWN0b3JpZXMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy91dGlscy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIG1vZHVsZSBjYW4gYmUgcmVzcG9uc2libGUgZm9yIHJlbmRlcmluZyBjb250ZW50IG9uIHRoZSBwYWdlLlxuLy8gSXQgY2FuIGluY2x1ZGUgZnVuY3Rpb25zIHRvIHVwZGF0ZSB0aGUgRE9NIGVsZW1lbnRzIHJlcHJlc2VudGluZyB0aGVcbi8vIGdhbWUgYm9hcmRzLCBzaGlwcywgYXR0YWNrcywgbWVzc2FnZXMsIGFuZCBvdGhlciBVSSBjb21wb25lbnRzLiBJdCBzaG91bGRcbi8vIGVuY2Fwc3VsYXRlIHRoZSBET00gbWFuaXB1bGF0aW9uIGNvZGUgYW5kIHByb3ZpZGUgYSBjbGVhbiBpbnRlcmZhY2UgZm9yXG4vLyB1cGRhdGluZyB0aGUgVUkgYmFzZWQgb24gdGhlIGdhbWUgc3RhdGUuIEl0IGNhbiBiZSB0aGUgYnJpZGdlIGJldHdlZW4gdGhlXG4vLyBnYW1lIGxvZ2ljIGFuZCB0aGUgYWN0dWFsIERPTSBtYW5pcHVsYXRpb24uXG5cbmNvbnN0IFJlbmRlcmVyID0gKCgpID0+IHtcbiAgY29uc3QgcmVuZGVyR2FtZWJvYXJkID0gKGNvbnRhaW5lckVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lckVsZW1lbnQpO1xuXG4gICAgY29udGFpbmVyLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgMTA7IGNvbCArPSAxKSB7XG4gICAgICAgIGNvbnN0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic3F1YXJlXCIpO1xuICAgICAgICBzcXVhcmUuZGF0YXNldC5yb3cgPSByb3c7XG4gICAgICAgIHNxdWFyZS5kYXRhc2V0LmNvbCA9IGNvbDtcblxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYXR0YWNoRXZlbnRMaXN0ZW5lcnMgPSAoY29udGFpbmVyRWxlbWVudCwgZXZlbnRMaXN0ZW5lcnMpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lckVsZW1lbnQpO1xuXG4gICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3F1YXJlXCIpLmZvckVhY2goKHNxdWFyZSkgPT4ge1xuICAgICAgZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IHtcbiAgICAgICAgc3F1YXJlLmFkZEV2ZW50TGlzdGVuZXIobGlzdGVuZXIuZXZlbnRUeXBlLCBsaXN0ZW5lci5oYW5kbGVyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHNldFdpbm5lckhlYWRpbmcgPSAod2lubmVyKSA9PiB7XG4gICAgY29uc3Qgd2lubmVySGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjd2lubmVyXCIpO1xuICAgIHdpbm5lckhlYWRpbmcudGV4dENvbnRlbnQgPSBgJHt3aW5uZXJ9IHdvbiFgO1xuICB9O1xuXG4gIGNvbnN0IGNsZWFyR2FtZWJvYXJkID0gKGNvbnRhaW5lckVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lckVsZW1lbnQpO1xuICAgIGNvbnN0IHNxdWFyZXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5zcXVhcmVcIik7XG5cbiAgICBzcXVhcmVzLmZvckVhY2goKHNxdWFyZSkgPT4ge1xuICAgICAgY29uc3QgcmVzZXRTcXVhcmUgPSBzcXVhcmU7XG4gICAgICByZXNldFNxdWFyZS5jbGFzc05hbWUgPSBcInNxdWFyZVwiOyAvLyBSZXNldCB0aGUgY2xhc3NOYW1lIHRvIHJlbW92ZSBhbGwgY2xhc3Nlc1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcmVuZGVyR2FtZWJvYXJkLFxuICAgIGF0dGFjaEV2ZW50TGlzdGVuZXJzLFxuICAgIHNldFdpbm5lckhlYWRpbmcsXG4gICAgY2xlYXJHYW1lYm9hcmQsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJlcjtcbiIsImltcG9ydCB7IEFwcEhlbHBlcnMsIEZhY3RvcnlIZWxwZXJzIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCBSZW5kZXJlciBmcm9tIFwiLi9yZW5kZXJcIjtcbmltcG9ydCB7IFNoaXBGYWN0b3J5LCBHYW1lYm9hcmRGYWN0b3J5LCBQbGF5ZXJGYWN0b3J5IH0gZnJvbSBcIi4vZmFjdG9yaWVzXCI7XG5cbi8vIDEuIFJlZmFjdG9yIGNvZGUgKGFzIHNpbXBsZSBhbmQgdW5kZXJzdGFuZGFibGUgYXMgcG9zc2libGUpXG4vLyAyLiBNYWtlIHRlc3RzIHBhc3Ncbi8vIDMuIEFkZCBjb21tZW50c1xuLy8gNC4gU3R5bGVcbi8vIDUuIFB1c2ggdG8gZ2gtcGFnZXMgYW5kIGFkZCByZWFkbWVcblxuY29uc3QgQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gIGNvbnN0IHBsYXllckdhbWVib2FyZCA9IEdhbWVib2FyZEZhY3RvcnkoKTtcbiAgY29uc3QgY29tcHV0ZXJHYW1lYm9hcmQgPSBHYW1lYm9hcmRGYWN0b3J5KCk7XG5cbiAgY29uc3QgY29tcHV0ZXIgPSBQbGF5ZXJGYWN0b3J5KFwiY29tcHV0ZXJcIik7XG5cbiAgbGV0IGN1cnJlbnRTaGlwSW5kZXggPSAwO1xuICBsZXQgc2hpcFBsYWNlbWVudE1vZGUgPSB0cnVlO1xuICBsZXQgaXNWZXJ0aWNhbCA9IGZhbHNlO1xuICBsZXQgd2lubmVyID0gbnVsbDtcblxuICBjb25zdCBwbGFjZUNvbXB1dGVyU2hpcHMgPSAoKSA9PiB7XG4gICAgY29uc3QgY29tcHV0ZXJTaGlwcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBBcHBIZWxwZXJzLnNoaXBUeXBlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgY29uc3QgeyB0eXBlLCBsZW5ndGggfSA9IEFwcEhlbHBlcnMuc2hpcFR5cGVzW2ldO1xuICAgICAgbGV0IGNvb3JkaW5hdGVzID0gW107XG4gICAgICBsZXQgcGxhY2VkID0gZmFsc2U7XG5cbiAgICAgIHdoaWxlICghcGxhY2VkKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0Um93ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgICAgICBjb25zdCBzdGFydENvbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICAgICAgaXNWZXJ0aWNhbCA9IE1hdGgucmFuZG9tKCkgPCAwLjU7XG4gICAgICAgIGNvb3JkaW5hdGVzID0gW107XG5cbiAgICAgICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgICBpZiAoc3RhcnRSb3cgKyBsZW5ndGggLSAxIDwgMTApIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoXywgaikgPT4gW1xuICAgICAgICAgICAgICBzdGFydFJvdyArIGosXG4gICAgICAgICAgICAgIHN0YXJ0Q29sLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0Q29sICsgbGVuZ3RoIC0gMSA8IDEwKSB7XG4gICAgICAgICAgY29vcmRpbmF0ZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBqKSA9PiBbXG4gICAgICAgICAgICBzdGFydFJvdyxcbiAgICAgICAgICAgIHN0YXJ0Q29sICsgaixcbiAgICAgICAgICBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcGxhY2VkID0gY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKFxuICAgICAgICAgICAgU2hpcEZhY3RvcnkobGVuZ3RoKSxcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb29yZGluYXRlcy5mb3JFYWNoKChbcm93LCBjb2xdKSA9PiB7XG4gICAgICAgIGNvbnN0IHBsYWNlZFNxdWFyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgYC5nYW1lYm9hcmQuY29tcHV0ZXIgW2RhdGEtcm93PVwiJHtyb3d9XCJdW2RhdGEtY29sPVwiJHtjb2x9XCJdYFxuICAgICAgICApO1xuICAgICAgICBwbGFjZWRTcXVhcmUuY2xhc3NMaXN0LmFkZChcInBsYWNlZFwiKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb21wdXRlclNoaXBzLnB1c2goeyB0eXBlLCBjb29yZGluYXRlcyB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2hpcFBsYWNlbWVudEhhbmRsZXIgPSAoZSkgPT4ge1xuICAgIGlmIChzaGlwUGxhY2VtZW50TW9kZSkge1xuICAgICAgY29uc3Qgc3F1YXJlID0gZS50YXJnZXQ7XG4gICAgICBjb25zdCBzdGFydFJvdyA9IHBhcnNlSW50KHNxdWFyZS5kYXRhc2V0LnJvdywgMTApO1xuICAgICAgY29uc3Qgc3RhcnRDb2wgPSBwYXJzZUludChzcXVhcmUuZGF0YXNldC5jb2wsIDEwKTtcbiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBBcHBIZWxwZXJzLnNoaXBUeXBlc1tjdXJyZW50U2hpcEluZGV4XTtcblxuICAgICAgY29uc3Qgc2hpcENvb3JkaW5hdGVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoXywgaSkgPT4ge1xuICAgICAgICBjb25zdCByb3cgPSBpc1ZlcnRpY2FsID8gc3RhcnRSb3cgKyBpIDogc3RhcnRSb3c7XG4gICAgICAgIGNvbnN0IGNvbCA9IGlzVmVydGljYWwgPyBzdGFydENvbCA6IHN0YXJ0Q29sICsgaTtcbiAgICAgICAgcmV0dXJuIFtyb3csIGNvbF07XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc2hpcCA9IFNoaXBGYWN0b3J5KGxlbmd0aCk7XG4gICAgICBjb25zdCBwbGFjZWQgPSBwbGF5ZXJHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXAsIHNoaXBDb29yZGluYXRlcyk7XG5cbiAgICAgIGlmIChwbGFjZWQpIHtcbiAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJwbGFjZWRcIik7XG4gICAgICAgIHNoaXBDb29yZGluYXRlcy5mb3JFYWNoKChbcm93LCBjb2xdKSA9PiB7XG4gICAgICAgICAgY29uc3QgcGxhY2VkU3F1YXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIGBbZGF0YS1yb3c9XCIke3Jvd31cIl1bZGF0YS1jb2w9XCIke2NvbH1cIl1gXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwbGFjZWRTcXVhcmUuY2xhc3NMaXN0LmFkZChcInBsYWNlZFwiKTtcbiAgICAgICAgICBjb25zdCBpbml0aWFsU3F1YXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIGAuZ2FtZWJvYXJkLmluaXRpYWwgW2RhdGEtcm93PVwiJHtyb3d9XCJdW2RhdGEtY29sPVwiJHtjb2x9XCJdYFxuICAgICAgICAgICk7XG4gICAgICAgICAgaW5pdGlhbFNxdWFyZS5jbGFzc0xpc3QuYWRkKFwicGxhY2VkXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyZW50U2hpcEluZGV4ICs9IDE7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRTaGlwSW5kZXggPT09IEFwcEhlbHBlcnMuc2hpcFR5cGVzLmxlbmd0aCkge1xuICAgICAgICAgIHNoaXBQbGFjZW1lbnRNb2RlID0gZmFsc2U7XG4gICAgICAgICAgcGxhY2VDb21wdXRlclNoaXBzKCk7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBBcHBIZWxwZXJzLnRvZ2dsZU1vZGFsKFxuICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmluaXRpYWxcIiksXG4gICAgICAgICAgICAgIFwiaGlkZVwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbmV4dFNoaXBUeXBlID0gQXBwSGVscGVycy5zaGlwVHlwZXNbY3VycmVudFNoaXBJbmRleF0udHlwZTtcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNoaXAtdHlwZVwiKS50ZXh0Q29udGVudCA9IG5leHRTaGlwVHlwZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBnYW1lYm9hcmRIb3ZlckhhbmRsZXIgPSAoZSkgPT4ge1xuICAgIGlmIChzaGlwUGxhY2VtZW50TW9kZSkge1xuICAgICAgY29uc3Qgc3F1YXJlID0gZS50YXJnZXQ7XG4gICAgICBjb25zdCBzdGFydFJvdyA9IHBhcnNlSW50KHNxdWFyZS5kYXRhc2V0LnJvdywgMTApO1xuICAgICAgY29uc3Qgc3RhcnRDb2wgPSBwYXJzZUludChzcXVhcmUuZGF0YXNldC5jb2wsIDEwKTtcbiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBBcHBIZWxwZXJzLnNoaXBUeXBlc1tjdXJyZW50U2hpcEluZGV4XTtcblxuICAgICAgY29uc3QgaG92ZXJlZFNxdWFyZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvdyA9IGlzVmVydGljYWwgPyBzdGFydFJvdyArIGkgOiBzdGFydFJvdztcbiAgICAgICAgY29uc3QgY29sID0gaXNWZXJ0aWNhbCA/IHN0YXJ0Q29sIDogc3RhcnRDb2wgKyBpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGluaXRpYWxTcXVhcmU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICBgLmdhbWVib2FyZC5pbml0aWFsIFtkYXRhLXJvdz1cIiR7cm93fVwiXVtkYXRhLWNvbD1cIiR7Y29sfVwiXWBcbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGhvdmVyZWRTcXVhcmVzLmZvckVhY2goKHsgaW5pdGlhbFNxdWFyZSB9KSA9PiB7XG4gICAgICAgIGlmIChpbml0aWFsU3F1YXJlKSB7XG4gICAgICAgICAgaW5pdGlhbFNxdWFyZS5jbGFzc0xpc3QuYWRkKFwiaG92ZXJlZFwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdhbWVib2FyZE1vdXNlTGVhdmVIYW5kbGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IGhvdmVyZWRTcXVhcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5nYW1lYm9hcmQgLmhvdmVyZWRcIik7XG4gICAgaG92ZXJlZFNxdWFyZXMuZm9yRWFjaCgoaG92ZXJlZFNxdWFyZSkgPT4ge1xuICAgICAgaG92ZXJlZFNxdWFyZS5jbGFzc0xpc3QucmVtb3ZlKFwiaG92ZXJlZFwiKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBjb21wdXRlckF0dGFjayA9ICgpID0+IHtcbiAgICBpZiAoIXNoaXBQbGFjZW1lbnRNb2RlKSB7XG4gICAgICBjb25zdCBjb29yZGluYXRlID0gY29tcHV0ZXIuYXR0YWNrKHBsYXllckdhbWVib2FyZCk7XG4gICAgICBjb25zdCBhdHRhY2tlZFNoaXAgPSBwbGF5ZXJHYW1lYm9hcmQucmVjZWl2ZUF0dGFjayhjb29yZGluYXRlKTtcbiAgICAgIGNvbnN0IHJvdyA9IHBhcnNlSW50KGNvb3JkaW5hdGUuc2xpY2UoMSksIDEwKSAtIDE7XG4gICAgICBjb25zdCBjb2wgPSBjb29yZGluYXRlWzBdLmNoYXJDb2RlQXQoMCkgLSA2NTtcblxuICAgICAgY29uc3Qgc3F1YXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC5nYW1lYm9hcmQucGxheWVyIFtkYXRhLXJvdz1cIiR7cm93fVwiXVtkYXRhLWNvbD1cIiR7Y29sfVwiXWBcbiAgICAgICk7XG5cbiAgICAgIGlmIChhdHRhY2tlZFNoaXApIHtcbiAgICAgICAgc3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChwbGF5ZXJHYW1lYm9hcmQuYWxsU2hpcHNTdW5rKCkpIHtcbiAgICAgICAgd2lubmVyID0gXCJUaGUgY29tcHV0ZXJcIjtcbiAgICAgICAgUmVuZGVyZXIuc2V0V2lubmVySGVhZGluZyh3aW5uZXIpO1xuICAgICAgICBBcHBIZWxwZXJzLnRvZ2dsZU1vZGFsKFxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwuZW5kZ2FtZVwiKSxcbiAgICAgICAgICBcInNob3dcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCBwbGF5ZXJBdHRhY2sgPSAoZSkgPT4ge1xuICAgIGlmICghc2hpcFBsYWNlbWVudE1vZGUpIHtcbiAgICAgIGNvbnN0IHNxdWFyZSA9IGUudGFyZ2V0O1xuICAgICAgY29uc3Qgcm93ID0gcGFyc2VJbnQoc3F1YXJlLmRhdGFzZXQucm93LCAxMCk7XG4gICAgICBjb25zdCBjb2wgPSBwYXJzZUludChzcXVhcmUuZGF0YXNldC5jb2wsIDEwKTtcbiAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBGYWN0b3J5SGVscGVycy5jb252ZXJ0VG9BbHBoYW51bWVyaWMoW3JvdywgY29sXSk7XG5cbiAgICAgIGlmICghY29tcHV0ZXJHYW1lYm9hcmQuZ2V0QXR0YWNrZWRDb29yZGluYXRlcygpLmluY2x1ZGVzKGNvb3JkaW5hdGUpKSB7XG4gICAgICAgIGNvbnN0IGF0dGFja2VkU2hpcCA9IGNvbXB1dGVyR2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGF0dGFja2VkU2hpcCk7XG4gICAgICAgIGlmIChhdHRhY2tlZFNoaXApIHtcbiAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29tcHV0ZXJHYW1lYm9hcmQuYWxsU2hpcHNTdW5rKCkpIHtcbiAgICAgICAgICB3aW5uZXIgPSBcIllvdVwiO1xuICAgICAgICAgIFJlbmRlcmVyLnNldFdpbm5lckhlYWRpbmcod2lubmVyKTtcbiAgICAgICAgICBBcHBIZWxwZXJzLnRvZ2dsZU1vZGFsKFxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC5lbmRnYW1lXCIpLFxuICAgICAgICAgICAgXCJzaG93XCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbXB1dGVyQXR0YWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJvdGF0ZVNoaXBzID0gKCkgPT4ge1xuICAgIGlzVmVydGljYWwgPSAhaXNWZXJ0aWNhbDtcbiAgfTtcblxuICBjb25zdCBldmVudExpc3RlbmVycyA9IFtcbiAgICB7IGV2ZW50VHlwZTogXCJtb3VzZW92ZXJcIiwgaGFuZGxlcjogZ2FtZWJvYXJkSG92ZXJIYW5kbGVyIH0sXG4gICAgeyBldmVudFR5cGU6IFwibW91c2VsZWF2ZVwiLCBoYW5kbGVyOiBnYW1lYm9hcmRNb3VzZUxlYXZlSGFuZGxlciB9LFxuICAgIHsgZXZlbnRUeXBlOiBcImNsaWNrXCIsIGhhbmRsZXI6IHNoaXBQbGFjZW1lbnRIYW5kbGVyIH0sXG4gIF07XG5cbiAgY29uc3QgcmVzZXRHYW1lID0gKCkgPT4ge1xuICAgIC8vIFJlc2V0IGdhbWUtcmVsYXRlZCB2YXJpYWJsZXNcbiAgICBjdXJyZW50U2hpcEluZGV4ID0gMDtcbiAgICBzaGlwUGxhY2VtZW50TW9kZSA9IHRydWU7XG4gICAgaXNWZXJ0aWNhbCA9IGZhbHNlO1xuICAgIHdpbm5lciA9IG51bGw7XG5cbiAgICAvLyBSZXNldCBnYW1lYm9hcmQgb2JqZWN0c1xuICAgIHBsYXllckdhbWVib2FyZC5yZXNldCgpO1xuICAgIGNvbXB1dGVyR2FtZWJvYXJkLnJlc2V0KCk7XG5cbiAgICAvLyBDbGVhciBwbGF5ZXIgb2JqZWN0cyBhdHRhY2tlZENvb3JkaW5hdGVzIHNldFxuICAgIGNvbXB1dGVyLmNsZWFyU2V0KCk7XG5cbiAgICAvLyBSZW1vdmUgaGl0IGFuZCBtaXNzIGNsYXNzZXMgZnJvbSBhbGwgc3F1YXJlc1xuICAgIFJlbmRlcmVyLmNsZWFyR2FtZWJvYXJkKFwiLmdhbWVib2FyZC5pbml0aWFsXCIpO1xuICAgIFJlbmRlcmVyLmNsZWFyR2FtZWJvYXJkKFwiLmdhbWVib2FyZC5wbGF5ZXJcIik7XG4gICAgUmVuZGVyZXIuY2xlYXJHYW1lYm9hcmQoXCIuZ2FtZWJvYXJkLmNvbXB1dGVyXCIpO1xuXG4gICAgLy8gUmVzZXQgc2hpcFR5cGVzXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaGlwLXR5cGVcIikudGV4dENvbnRlbnQgPVxuICAgICAgQXBwSGVscGVycy5zaGlwVHlwZXNbMF0udHlwZTtcbiAgfTtcblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIEFwcEhlbHBlcnMudG9nZ2xlTW9kYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC5lbmRnYW1lXCIpLCBcImhpZGVcIik7XG4gICAgUmVuZGVyZXIucmVuZGVyR2FtZWJvYXJkKFwiLmdhbWVib2FyZC5pbml0aWFsXCIpO1xuICAgIFJlbmRlcmVyLnJlbmRlckdhbWVib2FyZChcIi5nYW1lYm9hcmQucGxheWVyXCIpO1xuICAgIFJlbmRlcmVyLnJlbmRlckdhbWVib2FyZChcIi5nYW1lYm9hcmQuY29tcHV0ZXJcIik7XG4gICAgUmVuZGVyZXIuYXR0YWNoRXZlbnRMaXN0ZW5lcnMoXCIuZ2FtZWJvYXJkLmluaXRpYWxcIiwgZXZlbnRMaXN0ZW5lcnMpO1xuXG4gICAgY29uc3QgY29tcHV0ZXJTcXVhcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcbiAgICAgIFwiLmdhbWVib2FyZC5jb21wdXRlciAuc3F1YXJlXCJcbiAgICApO1xuICAgIGNvbXB1dGVyU3F1YXJlcy5mb3JFYWNoKChzcXVhcmUpID0+IHtcbiAgICAgIHNxdWFyZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcGxheWVyQXR0YWNrKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IHJvdGF0ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcm90YXRlQnRuXCIpO1xuICAgIHJvdGF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcm90YXRlU2hpcHMpO1xuXG4gICAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXdHYW1lXCIpO1xuICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgcmVzZXRHYW1lKCk7XG4gICAgICBBcHBIZWxwZXJzLnRvZ2dsZU1vZGFsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwuZW5kZ2FtZVwiKSwgXCJoaWRlXCIpO1xuICAgICAgQXBwSGVscGVycy50b2dnbGVNb2RhbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmluaXRpYWxcIiksIFwic2hvd1wiKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQsXG4gIH07XG59KSgpO1xuXG5Db250cm9sbGVyLmluaXQoKTtcbiIsImltcG9ydCB7IEZhY3RvcnlIZWxwZXJzIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IGNvbnN0IFNoaXBGYWN0b3J5ID0gKGxlbmd0aCkgPT4ge1xuICBsZXQgaGl0cyA9IDA7XG5cbiAgY29uc3QgaGl0ID0gKCkgPT4ge1xuICAgIGhpdHMgKz0gMTtcbiAgfTtcblxuICBjb25zdCBpc1N1bmsgPSAoKSA9PiBoaXRzID49IGxlbmd0aDsgLy8gUmV0dXJuIHRydWUgaWYgaGl0cyBpcyBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gbGVuZ3RoXG5cbiAgcmV0dXJuIHtcbiAgICBsZW5ndGgsXG4gICAgaGl0LFxuICAgIGlzU3VuayxcbiAgICBnZXQgaGl0cygpIHtcbiAgICAgIC8vIEdldHRlciBmdW5jdGlvbiBmb3IgaGl0cy4gVXNpbmcgZnVuY3Rpb24gZGVjbGFyYXRpb24gdG8gZW5zdXJlIGl0IGhhcyBhY2Nlc3MgdG8gdGhlXG4gICAgICAvLyBgaGl0c2AgdmFyaWFibGUgZHluYW1pY2FsbHksIHNpbmNlIGZ1bmN0aW9uIGRlY2xhcmF0aW9ucyBhcmUgaG9pc3RlZCBhbmQgY2FuIGJlIHVzZWRcbiAgICAgIC8vIGJlZm9yZSB0aGV5IGFyZSBkZWZpbmVkLiBUaGlzIGFsbG93cyBhY2Nlc3NpbmcgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYGhpdHNgIGV2ZW4gYmVmb3JlXG4gICAgICAvLyBjYWxsaW5nIHRoZSBgaGl0YCBmdW5jdGlvblxuICAgICAgcmV0dXJuIGhpdHM7XG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBHYW1lYm9hcmRGYWN0b3J5ID0gKCkgPT4ge1xuICBjb25zdCBncmlkU2l6ZSA9IDEwO1xuICBjb25zdCBncmlkID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogZ3JpZFNpemUgfSwgKCkgPT5cbiAgICBBcnJheShncmlkU2l6ZSkuZmlsbChudWxsKVxuICApO1xuXG4gIGxldCBhdHRhY2tlZENvb3JkaW5hdGVzID0gW107XG4gIGxldCBtaXNzZWRBdHRhY2tzID0gW107XG5cbiAgY29uc3QgZ2V0R3JpZCA9ICgpID0+IGdyaWQ7XG5cbiAgY29uc3QgcGxhY2VTaGlwID0gKHNoaXAsIGNvb3JkaW5hdGVzKSA9PiB7XG4gICAgLy8gQ2hlY2sgaWYgYWxsIGNvb3JkaW5hdGVzIGFyZSB3aXRoaW4gdGhlIGJvdW5kYXJpZXMgb2YgdGhlIGdyaWRcbiAgICBjb25zdCB3aXRoaW5Cb3VuZGFyaWVzID0gY29vcmRpbmF0ZXMuZXZlcnkoXG4gICAgICAoW3JvdywgY29sXSkgPT5cbiAgICAgICAgcm93ID4gMCAmJiByb3cgPCBncmlkU2l6ZSAtIDEgJiYgY29sID4gMCAmJiBjb2wgPCBncmlkU2l6ZSAtIDFcbiAgICApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSBjb25mbGljdHMgd2l0aCBleGlzdGluZyBzaGlwIHBsYWNlbWVudHMgb24gdGhlIGdyaWRcbiAgICBjb25zdCBjb25mbGljdHMgPSBjb29yZGluYXRlcy5zb21lKChbcm93LCBjb2xdKSA9PiBncmlkW3Jvd11bY29sXSAhPT0gbnVsbCk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgYW55IGFkamFjZW50IGNvbmZsaWN0cyB3aXRoIGV4aXN0aW5nIHNoaXAgcGxhY2VtZW50cyBvbiB0aGUgZ3JpZFxuICAgIGNvbnN0IGFkamFjZW50Q29uZmxpY3RzID0gY29vcmRpbmF0ZXMuc29tZSgoW3JvdywgY29sXSkgPT4ge1xuICAgICAgLy8gRGVmaW5lIHRoZSBhZGphY2VudCBjb29yZGluYXRlcyBhcm91bmQgdGhlIGN1cnJlbnQgY29vcmRpbmF0ZVxuICAgICAgY29uc3QgYWRqYWNlbnRDb29yZGluYXRlcyA9IFtcbiAgICAgICAgW3JvdyAtIDEsIGNvbF0sIC8vIFVwXG4gICAgICAgIFtyb3cgKyAxLCBjb2xdLCAvLyBEb3duXG4gICAgICAgIFtyb3csIGNvbCAtIDFdLCAvLyBMZWZ0XG4gICAgICAgIFtyb3csIGNvbCArIDFdLCAvLyBSaWdodFxuICAgICAgICBbcm93IC0gMSwgY29sIC0gMV0sIC8vIERpYWdvbmFsIFVwLUxlZnRcbiAgICAgICAgW3JvdyAtIDEsIGNvbCArIDFdLCAvLyBEaWFnb25hbCBVcC1SaWdodFxuICAgICAgICBbcm93ICsgMSwgY29sIC0gMV0sIC8vIERpYWdvbmFsIERvd24tTGVmdFxuICAgICAgICBbcm93ICsgMSwgY29sICsgMV0sIC8vIERpYWdvbmFsIERvd24tUmlnaHRcbiAgICAgIF07XG5cbiAgICAgIC8vIENoZWNrIGlmIGFueSBhZGphY2VudCBjb29yZGluYXRlIGhhcyBhIHNoaXAgcGxhY2VkIG9uIGl0XG4gICAgICByZXR1cm4gYWRqYWNlbnRDb29yZGluYXRlcy5zb21lKFxuICAgICAgICAoW2FkalJvdywgYWRqQ29sXSkgPT5cbiAgICAgICAgICBhZGpSb3cgPj0gMCAmJlxuICAgICAgICAgIGFkalJvdyA8IGdyaWRTaXplICYmXG4gICAgICAgICAgYWRqQ29sID49IDAgJiZcbiAgICAgICAgICBhZGpDb2wgPCBncmlkU2l6ZSAmJlxuICAgICAgICAgIGdyaWRbYWRqUm93XT8uW2FkakNvbF0gIT09IG51bGxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICAvLyBJZiB0aGUgc2hpcCBwbGFjZW1lbnQgaXMgd2l0aGluIGdyaWQgYm91bmRhcmllcywgaGFzIG5vIGNvbmZsaWN0cywgYW5kIG5vIGFkamFjZW50IGNvbmZsaWN0cy4uLlxuICAgIGlmICh3aXRoaW5Cb3VuZGFyaWVzICYmICFjb25mbGljdHMgJiYgIWFkamFjZW50Q29uZmxpY3RzKSB7XG4gICAgICAvLyBDcmVhdGUgYW4gb2JqZWN0IGNvbnRhaW5pbmcgc2hpcCBpbmZvcm1hdGlvbiBhbmQgY29vcmRpbmF0ZXNcbiAgICAgIGNvbnN0IHNoaXBJbmZvID0ge1xuICAgICAgICBzaGlwLFxuICAgICAgICBjb29yZGluYXRlcyxcbiAgICAgIH07XG5cbiAgICAgIC8vIFBsYWNlIHRoZSBzaGlwIG9uIHRoZSBncmlkIGJ5IHVwZGF0aW5nIHRoZSBjb3JyZXNwb25kaW5nIGNlbGxzXG4gICAgICBzaGlwSW5mby5jb29yZGluYXRlcy5mb3JFYWNoKChbcm93LCBjb2xdKSA9PiB7XG4gICAgICAgIGdyaWRbcm93XVtjb2xdID0gc2hpcEluZm87XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHRydWU7IC8vIFNoaXAgcGxhY2VtZW50IHN1Y2Nlc3NmdWxcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7IC8vIE90aGVyd2lzZSwgc2hpcCBwbGFjZW1lbnQgZmFpbGVkXG4gIH07XG5cbiAgY29uc3QgZ2V0U2hpcHMgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcHMgPSBbXTtcblxuICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBlYWNoIGNlbGwgb2YgdGhlIGdyaWRcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBncmlkU2l6ZTsgcm93ICs9IDEpIHtcbiAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IGdyaWRTaXplOyBjb2wgKz0gMSkge1xuICAgICAgICBjb25zdCBjZWxsID0gZ3JpZFtyb3ddW2NvbF07XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjZWxsIGNvbnRhaW5zIGEgc2hpcCBhbmQgaXQncyBub3QgYWxyZWFkeSBpbmNsdWRlZCBpbiB0aGUgc2hpcHMgYXJyYXlcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNlbGwgIT09IG51bGwgJiZcbiAgICAgICAgICBjZWxsLnNoaXAgJiZcbiAgICAgICAgICAhc2hpcHMuaW5jbHVkZXMoY2VsbC5zaGlwKSAmJlxuICAgICAgICAgICFjZWxsLnNoaXAuaXNTdW5rKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gQWRkIHRoZSBzaGlwIHRvIHRoZSBzaGlwcyBhcnJheVxuICAgICAgICAgIHNoaXBzLnB1c2goY2VsbC5zaGlwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzaGlwcztcbiAgfTtcblxuICBjb25zdCBnZXRBbGxTaGlwcyA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwcyA9IFtdO1xuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGVhY2ggY2VsbCBvZiB0aGUgZ3JpZFxuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IGdyaWRTaXplOyByb3cgKz0gMSkge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgZ3JpZFNpemU7IGNvbCArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBncmlkW3Jvd11bY29sXTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNlbGwgY29udGFpbnMgYSBzaGlwIGFuZCBpdCdzIG5vdCBhbHJlYWR5IGluY2x1ZGVkIGluIHRoZSBzaGlwcyBhcnJheVxuICAgICAgICBpZiAoY2VsbCAhPT0gbnVsbCAmJiBjZWxsLnNoaXAgJiYgIXNoaXBzLmluY2x1ZGVzKGNlbGwuc2hpcCkpIHtcbiAgICAgICAgICAvLyBBZGQgdGhlIHNoaXAgdG8gdGhlIHNoaXBzIGFycmF5XG4gICAgICAgICAgc2hpcHMucHVzaChjZWxsLnNoaXApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coc2hpcHMpO1xuICAgIHJldHVybiBzaGlwcztcbiAgfTtcblxuICBjb25zdCBnZXRTaGlwQ29vcmRpbmF0ZXMgPSAoc2hpcCkgPT4ge1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gW107XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCBjZWxsIG9mIHRoZSBncmlkXG4gICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgZ3JpZFNpemU7IHJvdyArPSAxKSB7XG4gICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCBncmlkU2l6ZTsgY29sICs9IDEpIHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdyaWRbcm93XVtjb2xdO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2VsbCBleGlzdHMgYW5kIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgc2hpcFxuICAgICAgICBpZiAoY2VsbCAmJiBjZWxsLnNoaXAgPT09IHNoaXApIHtcbiAgICAgICAgICAvLyBDb252ZXJ0IHRoZSByb3cgYW5kIGNvbHVtbiBpbmRpY2VzIHRvIGFscGhhbnVtZXJpYyBjb29yZGluYXRlcyBhbmQgYWRkIHRoZW0gdG9cbiAgICAgICAgICAvLyB0aGUgY29vcmRpbmF0ZXMgYXJyYXlcbiAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKEZhY3RvcnlIZWxwZXJzLmNvbnZlcnRUb0FscGhhbnVtZXJpYyhbcm93LCBjb2xdKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29vcmRpbmF0ZXM7XG4gIH07XG5cbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlKSA9PiB7XG4gICAgY29uc3QgW2NvbHVtbkxldHRlciwgcm93TnVtYmVyXSA9IGNvb3JkaW5hdGU7XG4gICAgY29uc3Qgcm93ID0gcGFyc2VJbnQocm93TnVtYmVyLCAxMCkgLSAxO1xuICAgIGNvbnN0IGNvbCA9IGNvbHVtbkxldHRlci5jaGFyQ29kZUF0KDApIC0gNjU7XG4gICAgY29uc3QgY2VsbCA9IGdyaWRbcm93XVtjb2xdO1xuXG4gICAgaWYgKGNlbGwgIT09IG51bGwpIHtcbiAgICAgIC8vIFNoaXAgYXQgY29vcmRpbmF0ZSwgaXQncyBhIGhpdFxuICAgICAgY29uc3QgeyBzaGlwIH0gPSBjZWxsO1xuICAgICAgc2hpcC5oaXQoKTsgLy8gSW5jcmVtZW50IGhpdCBjb3VudCBvZiB0aGUgc2hpcFxuICAgICAgYXR0YWNrZWRDb29yZGluYXRlcy5wdXNoKGNvb3JkaW5hdGUpO1xuICAgICAgcmV0dXJuIHNoaXA7IC8vIFJldHVybiB0aGUgc2hpcCBvYmplY3Qgd2hlbiBpdCBpcyBoaXRcbiAgICB9XG4gICAgLy8gTm8gc2hpcCBhdCBjb29yZGluYXRlLCBpdCdzIGEgbWlzc1xuICAgIG1pc3NlZEF0dGFja3MucHVzaChjb29yZGluYXRlKTtcbiAgICBhdHRhY2tlZENvb3JkaW5hdGVzLnB1c2goY29vcmRpbmF0ZSk7XG4gICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIHdoZW4gaXQncyBhIG1pc3NcbiAgfTtcblxuICBjb25zdCBhbGxTaGlwc1N1bmsgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcHMgPSBnZXRTaGlwcygpOyAvLyBSZXRyaWV2ZSBhbGwgdGhlIHNoaXBzIG9uIHRoZSBnYW1lYm9hcmRcblxuICAgIC8vIENoZWNrIGlmIGFsbCBzaGlwcyBhcmUgc3VuaywgcmV0dXJuIHRydWUgaWYgeWVzLCBhbmQgcmV0dXJuIGZhbHNlIGlmIG5vXG4gICAgY29uc3QgcmVzdWx0ID0gc2hpcHMuZXZlcnkoKHNoaXApID0+IHNoaXAuaXNTdW5rKCkpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBjb25zdCByZXNldCA9ICgpID0+IHtcbiAgICAvLyBDbGVhciB0aGUgZ3JpZCBieSBzZXR0aW5nIGFsbCBjZWxscyB0byBudWxsXG4gICAgZ3JpZC5mb3JFYWNoKChyb3csIHJvd0luZGV4KSA9PiB7XG4gICAgICByb3cuZm9yRWFjaCgoXywgY29sSW5kZXgpID0+IHtcbiAgICAgICAgZ3JpZFtyb3dJbmRleF1bY29sSW5kZXhdID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gUmVhc3NpZ24gZW1wdHkgYXJyYXlzIHRvIGNsZWFyIHRoZSBjb250ZW50cyBvZiBhdHRhY2tlZENvb3JkaW5hdGVzIGFuZCBtaXNzZWRBdHRhY2tzXG4gICAgYXR0YWNrZWRDb29yZGluYXRlcyA9IFtdO1xuICAgIG1pc3NlZEF0dGFja3MgPSBbXTtcbiAgfTtcblxuICBjb25zdCBnZXRNaXNzZWRBdHRhY2tzID0gKCkgPT4gbWlzc2VkQXR0YWNrcztcblxuICBjb25zdCBnZXRBdHRhY2tlZENvb3JkaW5hdGVzID0gKCkgPT4gYXR0YWNrZWRDb29yZGluYXRlcztcblxuICByZXR1cm4ge1xuICAgIGdldEdyaWQsXG4gICAgcGxhY2VTaGlwLFxuICAgIGdldFNoaXBzLFxuICAgIGdldEFsbFNoaXBzLFxuICAgIGdldFNoaXBDb29yZGluYXRlcyxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIGdldE1pc3NlZEF0dGFja3MsXG4gICAgZ2V0QXR0YWNrZWRDb29yZGluYXRlcyxcbiAgICBhbGxTaGlwc1N1bmssXG4gICAgcmVzZXQsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgUGxheWVyRmFjdG9yeSA9IChuYW1lKSA9PiB7XG4gIGNvbnN0IGF0dGFja2VkQ29vcmRpbmF0ZXMgPSBuZXcgU2V0KCk7IC8vIFNldCB0byBrZWVwIHRyYWNrIG9mIGF0dGFja2VkIGNvb3JkaW5hdGVzXG5cbiAgY29uc3QgYXR0YWNrID0gKGVuZW15R2FtZWJvYXJkKSA9PiB7XG4gICAgY29uc3QgZ3JpZFNpemUgPSBlbmVteUdhbWVib2FyZC5nZXRHcmlkKCkubGVuZ3RoO1xuICAgIGNvbnN0IHZhbGlkQ29vcmRpbmF0ZXMgPSBGYWN0b3J5SGVscGVycy5nZXRBbGxWYWxpZENvb3JkaW5hdGVzKGdyaWRTaXplKTtcblxuICAgIGxldCBjb29yZGluYXRlID0gXCJcIjtcblxuICAgIC8vIFBlcmZvcm0gYSBkby13aGlsZSBsb29wIHVudGlsIGEgdW5pcXVlIGNvb3JkaW5hdGUgaXMgZm91bmRcbiAgICBkbyB7XG4gICAgICAvLyBHZW5lcmF0ZSBhIHJhbmRvbSBpbmRleCBiYXNlZCBvbiB0aGUgbGVuZ3RoIG9mIHZhbGlkQ29vcmRpbmF0ZXMgYXJyYXlcbiAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsaWRDb29yZGluYXRlcy5sZW5ndGgpO1xuXG4gICAgICAvLyBHZXQgdGhlIGNvb3JkaW5hdGUgYXQgdGhlIHJhbmRvbSBpbmRleFxuICAgICAgY29vcmRpbmF0ZSA9IHZhbGlkQ29vcmRpbmF0ZXNbcmFuZG9tSW5kZXhdO1xuICAgIH0gd2hpbGUgKFxuICAgICAgLy8gQ29udGludWUgbG9vcGluZyB3aXRob3V0IHBlcmZvcm1pbmcgYW55IGFjdGlvbnMgaWYgdGhlIGNvb3JkaW5hdGUgaXMgYWxyZWFkeVxuICAgICAgLy8gaW4gdGhlIHBsYXllcnMgYXR0YWNrZWRDb29yZGluYXRlcyBzZXQgb3IgaXMgaW5jbHVkZWQgaW4gdGhlIGVuZW15R2FtZWJvYXJkc1xuICAgICAgLy8gYXR0YWNrZWRDb29yZGluYXRlcyBhcnJheVxuICAgICAgYXR0YWNrZWRDb29yZGluYXRlcy5oYXMoY29vcmRpbmF0ZSkgfHxcbiAgICAgIGVuZW15R2FtZWJvYXJkLmdldEF0dGFja2VkQ29vcmRpbmF0ZXMoKS5pbmNsdWRlcyhjb29yZGluYXRlKVxuICAgICk7XG5cbiAgICAvLyBBZGQgdGhlIGF0dGFja2VkIGNvb3JkaW5hdGUgdG8gdGhlIHBsYXllcnMgc2V0IG9mIGF0dGFja2VkIGNvb3JkaW5hdGVzXG4gICAgYXR0YWNrZWRDb29yZGluYXRlcy5hZGQoY29vcmRpbmF0ZSk7XG5cbiAgICByZXR1cm4gY29vcmRpbmF0ZTsgLy8gUmV0dXJuIHRoZSBjb29yZGluYXRlIGFzIGFuIGFycmF5XG4gIH07XG5cbiAgY29uc3QgZ2V0QXR0YWNrZWRTZXQgPSAoKSA9PiBhdHRhY2tlZENvb3JkaW5hdGVzO1xuXG4gIGNvbnN0IGNsZWFyU2V0ID0gKCkgPT4ge1xuICAgIGF0dGFja2VkQ29vcmRpbmF0ZXMuY2xlYXIoKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIG5hbWUsXG4gICAgYXR0YWNrLFxuICAgIGdldEF0dGFja2VkU2V0LFxuICAgIGNsZWFyU2V0LFxuICB9O1xufTtcbiIsImV4cG9ydCBjb25zdCBGYWN0b3J5SGVscGVycyA9ICgoKSA9PiB7XG4gIGNvbnN0IHZhbGlkQ29vcmRpbmF0ZXMgPSBbXTtcblxuICBjb25zdCBjb252ZXJ0VG9JbmRpY2VzID0gKGNvb3JkaW5hdGUpID0+IHtcbiAgICBjb25zdCBjb2x1bW4gPSBjb29yZGluYXRlLmNoYXJDb2RlQXQoMCkgLSA2NTsgLy8gQ29udmVydCBjb2x1bW4gbGV0dGVyIHRvIGluZGV4XG4gICAgY29uc3Qgcm93ID0gcGFyc2VJbnQoY29vcmRpbmF0ZS5zbGljZSgxKSwgMTApIC0gMTsgLy8gQ29udmVydCByb3cgbnVtYmVyIHRvIGluZGV4IHdpdGggcmFkaXggMTBcbiAgICByZXR1cm4gW3JvdywgY29sdW1uXTtcbiAgfTtcblxuICBjb25zdCBjb252ZXJ0VG9BbHBoYW51bWVyaWMgPSAoW3JvdywgY29sdW1uXSkgPT4ge1xuICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbHVtbiArIDY1KTsgLy8gQ29udmVydCBjb2x1bW4gaW5kZXggdG8gbGV0dGVyXG4gICAgcmV0dXJuIGNvb3JkaW5hdGUgKyAocm93ICsgMSk7IC8vIENvbnZlcnQgcm93IGluZGV4IHRvIG51bWJlclxuICB9O1xuXG4gIGNvbnN0IGdldEFsbFZhbGlkQ29vcmRpbmF0ZXMgPSAoZ3JpZFNpemUpID0+IHtcbiAgICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBncmlkU2l6ZTsgcm93ICs9IDEpIHtcbiAgICAgIGZvciAobGV0IGNvbCA9IDA7IGNvbCA8IGdyaWRTaXplOyBjb2wgKz0gMSkge1xuICAgICAgICBjb25zdCBhbHBoYW51bWVyaWNDb29yZGluYXRlID0gY29udmVydFRvQWxwaGFudW1lcmljKFtyb3csIGNvbF0pO1xuICAgICAgICB2YWxpZENvb3JkaW5hdGVzLnB1c2goYWxwaGFudW1lcmljQ29vcmRpbmF0ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkQ29vcmRpbmF0ZXM7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBjb252ZXJ0VG9JbmRpY2VzLFxuICAgIGNvbnZlcnRUb0FscGhhbnVtZXJpYyxcbiAgICBnZXRBbGxWYWxpZENvb3JkaW5hdGVzLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGNvbnN0IEFwcEhlbHBlcnMgPSAoKCkgPT4ge1xuICBjb25zdCBzaGlwVHlwZXMgPSBbXG4gICAgeyB0eXBlOiBcImNhcnJpZXJcIiwgbGVuZ3RoOiA1IH0sXG4gICAgeyB0eXBlOiBcImJhdHRsZXNoaXBcIiwgbGVuZ3RoOiA0IH0sXG4gICAgeyB0eXBlOiBcImRlc3Ryb3llclwiLCBsZW5ndGg6IDMgfSxcbiAgICB7IHR5cGU6IFwic3VibWFyaW5lXCIsIGxlbmd0aDogMyB9LFxuICAgIHsgdHlwZTogXCJwYXRyb2wgYm9hdFwiLCBsZW5ndGg6IDIgfSxcbiAgXTtcblxuICBjb25zdCB0b2dnbGVNb2RhbCA9IChtb2RhbCwgY2hvaWNlKSA9PiB7XG4gICAgY29uc3QgdG9nZ2xlZE1vZGFsID0gbW9kYWw7XG5cbiAgICBjb25zdCBvdmVybGF5ID0gbW9kYWwuY2xvc2VzdChcIi5vdmVybGF5XCIpO1xuICAgIGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGNob2ljZSA9PT0gXCJzaG93XCIgPyBcImZsZXhcIiA6IFwibm9uZVwiO1xuXG4gICAgb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheVZhbHVlO1xuICAgIHRvZ2dsZWRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheVZhbHVlO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2hpcFR5cGVzLFxuICAgIHRvZ2dsZU1vZGFsLFxuICB9O1xufSkoKTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDM4MCk7XG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3Nik7XG4iXSwibmFtZXMiOlsiY29udGFpbmVyRWxlbWVudCIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50Iiwicm93IiwiY29sIiwic3F1YXJlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJhcHBlbmRDaGlsZCIsImV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJsaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudFR5cGUiLCJoYW5kbGVyIiwid2lubmVyIiwiY2xhc3NOYW1lIiwicGxheWVyR2FtZWJvYXJkIiwiY29tcHV0ZXJHYW1lYm9hcmQiLCJjb21wdXRlciIsImN1cnJlbnRTaGlwSW5kZXgiLCJzaGlwUGxhY2VtZW50TW9kZSIsImlzVmVydGljYWwiLCJwbGF5ZXJBdHRhY2siLCJlIiwidGFyZ2V0IiwicGFyc2VJbnQiLCJjb29yZGluYXRlIiwiY29udmVydFRvQWxwaGFudW1lcmljIiwiZ2V0QXR0YWNrZWRDb29yZGluYXRlcyIsImluY2x1ZGVzIiwiYXR0YWNrZWRTaGlwIiwicmVjZWl2ZUF0dGFjayIsImNvbnNvbGUiLCJsb2ciLCJhbGxTaGlwc1N1bmsiLCJ0b2dnbGVNb2RhbCIsImF0dGFjayIsInNsaWNlIiwiY2hhckNvZGVBdCIsImNvbXB1dGVyQXR0YWNrIiwicm90YXRlU2hpcHMiLCJzdGFydFJvdyIsInN0YXJ0Q29sIiwibGVuZ3RoIiwic2hpcFR5cGVzIiwiQXJyYXkiLCJmcm9tIiwiXyIsImkiLCJpbml0aWFsU3F1YXJlIiwiaG92ZXJlZFNxdWFyZSIsInJlbW92ZSIsInNoaXBDb29yZGluYXRlcyIsInNoaXAiLCJwbGFjZVNoaXAiLCJjb21wdXRlclNoaXBzIiwidHlwZSIsImNvb3JkaW5hdGVzIiwicGxhY2VkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaiIsInB1c2giLCJwbGFjZUNvbXB1dGVyU2hpcHMiLCJzZXRUaW1lb3V0IiwibmV4dFNoaXBUeXBlIiwiaW5pdCIsInJlc2V0IiwiY2xlYXJTZXQiLCJTaGlwRmFjdG9yeSIsImhpdHMiLCJoaXQiLCJpc1N1bmsiLCJHYW1lYm9hcmRGYWN0b3J5IiwiZ3JpZFNpemUiLCJncmlkIiwiZmlsbCIsImF0dGFja2VkQ29vcmRpbmF0ZXMiLCJtaXNzZWRBdHRhY2tzIiwiZ2V0U2hpcHMiLCJzaGlwcyIsImNlbGwiLCJnZXRHcmlkIiwid2l0aGluQm91bmRhcmllcyIsImV2ZXJ5IiwiY29uZmxpY3RzIiwic29tZSIsImFkamFjZW50Q29uZmxpY3RzIiwiYWRqUm93IiwiYWRqQ29sIiwic2hpcEluZm8iLCJnZXRBbGxTaGlwcyIsImdldFNoaXBDb29yZGluYXRlcyIsImNvbHVtbkxldHRlciIsInJvd051bWJlciIsImdldE1pc3NlZEF0dGFja3MiLCJyb3dJbmRleCIsImNvbEluZGV4IiwiUGxheWVyRmFjdG9yeSIsIm5hbWUiLCJTZXQiLCJlbmVteUdhbWVib2FyZCIsInZhbGlkQ29vcmRpbmF0ZXMiLCJnZXRBbGxWYWxpZENvb3JkaW5hdGVzIiwiaGFzIiwiZ2V0QXR0YWNrZWRTZXQiLCJjbGVhciIsIkZhY3RvcnlIZWxwZXJzIiwiY29sdW1uIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY29udmVydFRvSW5kaWNlcyIsImFscGhhbnVtZXJpY0Nvb3JkaW5hdGUiLCJBcHBIZWxwZXJzIiwibW9kYWwiLCJjaG9pY2UiLCJ0b2dnbGVkTW9kYWwiLCJkaXNwbGF5VmFsdWUiLCJjbG9zZXN0Iiwic3R5bGUiLCJkaXNwbGF5IiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIl0sInNvdXJjZVJvb3QiOiIifQ==