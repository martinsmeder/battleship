(()=>{"use strict";var e={380:(e,t,r)=>{var o=r(555);const n=e=>{const t=document.querySelector(e);t.textContent="";for(let e=0;e<10;e+=1)for(let r=0;r<10;r+=1){const n=o.r.convertToAlphanumeric([e,r]),a=document.createElement("div");a.classList.add("square"),a.dataset.coordinate=n,t.appendChild(a)}},a=(e,t)=>{document.querySelector(e).querySelectorAll(".square").forEach((e=>{t.forEach((t=>{e.addEventListener(t.eventType,t.handler)}))}))},l=e=>{document.querySelector("#winner").textContent=`${e} won!`},c=e=>{document.querySelector(e).querySelectorAll(".square").forEach((e=>{e.className="square"}))};var s=r(776);(()=>{const e=(0,s.Br)(),t=(0,s.Br)(),r=(0,s.oP)("computer");let i=0,d=!0,u=!1,h=null;const p=n=>{if(!d){const a=n.target,c=a.dataset.coordinate;t.getAttackedCoordinates().includes(c)||(t.receiveAttack(c)?a.classList.add("hit"):a.classList.add("miss"),t.allShipsSunk()&&(h="You",l(h),o.U.toggleModal(document.querySelector(".modal.endgame"),"show")),(()=>{if(!d){const t=r.attack(e,r.lastHitCoordinate,r.currentDirection),n=e.receiveAttack(t);console.log(`computerAttack() at: ${t}`);const a=document.querySelector(`.gameboard.player [data-coordinate="${t}"]`);n?(a.classList.add("hit"),r.lastHitCoordinate=t,null===r.currentDirection&&(r.currentDirection="up")):!n&&r.lastHitCoordinate?a.classList.add("miss"):n||r.lastHitCoordinate||(a.classList.add("miss"),r.lastHitCoordinate=null,r.currentDirection=null),e.allShipsSunk()&&(h="The computer",l(h),o.U.toggleModal(document.querySelector(".modal.endgame"),"show"))}})())}},m=()=>{u=!u},g=[{eventType:"mouseover",handler:e=>{if(d){const t=e.target.dataset.coordinate,{length:r}=o.U.shipTypes[i],[n,a]=o.r.convertToIndices(t);Array.from({length:r},((e,t)=>{const r=u?n+t:n,l=u?a:a+t;return{initialSquare:document.querySelector(`.gameboard.initial [data-coordinate="${o.r.convertToAlphanumeric([r,l])}"]`)}})).forEach((({initialSquare:e})=>{e&&e.classList.add("hovered")}))}}},{eventType:"mouseleave",handler:()=>{document.querySelectorAll(".gameboard .hovered").forEach((e=>{e.classList.remove("hovered")}))}},{eventType:"click",handler:r=>{if(d){const n=r.target,{coordinate:a}=n.dataset,{length:l}=o.U.shipTypes[i],[c,h]=o.r.convertToIndices(a),p=Array.from({length:l},((e,t)=>[u?c+t:c,u?h:h+t])),m=(0,s._V)(l);if(e.placeShip(m,p))if(n.classList.add("placed"),p.forEach((([e,t])=>{document.querySelector(`[data-coordinate="${o.r.convertToAlphanumeric([e,t])}"]`).classList.add("placed"),document.querySelector(`.gameboard.initial [data-coordinate="${o.r.convertToAlphanumeric([e,t])}"]`).classList.add("placed")})),i+=1,i===o.U.shipTypes.length)d=!1,(()=>{for(const e of o.U.shipTypes){const{length:r}=e,n=(0,s._V)(r),a=10;let l,c=!1;for(;!c;){const e=Math.floor(Math.random()*a),o=Math.floor(Math.random()*a);u=Math.random()<.5,u&&e+r<=a?l=Array.from({length:r},((t,r)=>[e+r,o])):!u&&o+r<=a&&(l=Array.from({length:r},((t,r)=>[e,o+r]))),l&&(c=t.placeShip(n,l))}const i=t.getShipCoordinates(n);for(const[e,t]of i){const r=o.r.convertToAlphanumeric([e,t]);document.querySelector(`.gameboard.computer [data-coordinate="${r}"]`).classList.add("placed")}}})(),setTimeout((()=>{o.U.toggleModal(document.querySelector(".modal.initial"),"hide")}),500);else{const e=o.U.shipTypes[i].type;document.querySelector(".ship-type").textContent=e}}}}];return{init:()=>{o.U.toggleModal(document.querySelector(".modal.endgame"),"hide"),n(".gameboard.initial"),n(".gameboard.player"),n(".gameboard.computer"),a(".gameboard.initial",g),document.querySelectorAll(".gameboard.computer .square").forEach((e=>{e.addEventListener("click",p)})),document.querySelector("#rotateBtn").addEventListener("click",m),document.querySelector("#newGame").addEventListener("click",(()=>{i=0,d=!0,u=!1,h=null,e.reset(),t.reset(),r.clearSet(),c(".gameboard.initial"),c(".gameboard.player"),c(".gameboard.computer"),document.querySelector(".ship-type").textContent=o.U.shipTypes[0].type,o.U.toggleModal(document.querySelector(".modal.endgame"),"hide"),o.U.toggleModal(document.querySelector(".modal.initial"),"show")}))}}})().init()},776:(e,t,r)=>{r.d(t,{Br:()=>a,_V:()=>n,oP:()=>l});var o=r(555);const n=e=>{let t=0;return{length:e,hit:()=>{t+=1},isSunk:()=>t>=e,get hits(){return t}}},a=()=>{const e=10,t=Array.from({length:e},(()=>Array(e).fill(null)));let r=[],o=[];const n=()=>{const r=[];for(let o=0;o<e;o+=1)for(let n=0;n<e;n+=1){const e=t[o][n];null===e||!e.ship||r.includes(e.ship)||e.ship.isSunk()||r.push(e.ship)}return r};return{getGrid:()=>t,placeShip:(r,o)=>{const n=o.every((([t,r])=>t>=0&&t<e&&r>=0&&r<e)),a=o.some((([e,r])=>null!==t[e][r])),l=o.some((([r,o])=>[[r-1,o],[r+1,o],[r,o-1],[r,o+1],[r-1,o-1],[r-1,o+1],[r+1,o-1],[r+1,o+1]].some((([r,o])=>r>=0&&r<e&&o>=0&&o<e&&null!==t[r]?.[o]))));if(n&&!a&&!l){const e={ship:r,coordinates:o};return e.coordinates.forEach((([r,o])=>{t[r][o]=e})),!0}return!1},getShips:n,getAllShips:()=>{const r=[];for(let o=0;o<e;o+=1)for(let n=0;n<e;n+=1){const e=t[o][n];null!==e&&e.ship&&!r.includes(e.ship)&&r.push(e.ship)}return r},getShipCoordinates:r=>{const o=[];for(let n=0;n<e;n+=1)for(let a=0;a<e;a+=1){const e=t[n][a];e&&e.ship===r&&o.push([n,a])}return o},receiveAttack:e=>{const[n,a]=e,l=parseInt(a,10),c=n.charCodeAt(0)-65,s=t[l][c];if(null!==s){const{ship:t}=s;return t.hit(),r.push(e),t}return o.push(e),r.push(e),null},getMissedAttacks:()=>o,getAttackedCoordinates:()=>r,allShipsSunk:()=>n().every((e=>e.isSunk())),reset:()=>{t.forEach(((e,r)=>{e.forEach(((e,o)=>{t[r][o]=null}))})),r=[],o=[]}}},l=(e,t,r)=>{const n=new Set,a=(e,t)=>{const[r,n]=e;let a=parseInt(n,10),l=r.charCodeAt(0)-65;switch(t){case"up":a-=1;break;case"down":a+=1;break;case"left":l-=1;break;case"right":l+=1}return o.r.convertToAlphanumeric([a,l])},l=()=>{const e=["up","down","left","right"];if(t){const r=e.indexOf(t);-1!==r&&(e.splice(r,1),e.push(t),console.log(t))}else for(let t=e.length-1;t>0;t-=1){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e};return{name:e,lastHitCoordinate:r,currentDirection:t,attack:(e,t,r)=>{const c=e.getGrid().length,s=o.r.getAllValidCoordinates(c);let i="";if(console.log(`lastHitCoordinate: ${t}`),console.log(`currentDirection: ${r}`),t&&r){const o=l();for(const l of o)if(i=a(t,l),s.includes(i)&&!n.has(i)&&!e.getAttackedCoordinates().includes(i))return n.add(i),t=i,r=l,i}do{i=s[Math.floor(Math.random()*s.length)]}while(n.has(i)||e.getAttackedCoordinates().includes(i));return n.add(i),i},getAttackedSet:()=>n,clearSet:()=>{n.clear()}}}},555:(e,t,r)=>{r.d(t,{U:()=>n,r:()=>o});const o=(()=>{const e=[],t=([e,t])=>String.fromCharCode(t+65)+e;return{convertToIndices:e=>{const t=e.charCodeAt(0)-65;return[parseInt(e.slice(1),10),t]},convertToAlphanumeric:t,getAllValidCoordinates:r=>{for(let o=0;o<r;o+=1)for(let n=0;n<r;n+=1){const r=t([o,n]);e.push(r)}return e}}})(),n={shipTypes:[{type:"carrier",length:5},{type:"battleship",length:4},{type:"destroyer",length:3},{type:"submarine",length:3},{type:"patrol boat",length:2}],toggleModal:(e,t)=>{const r=e,o="show"===t?"flex":"none";e.closest(".overlay").style.display=o,r.style.display=o}}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r(380),r(776)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoicURBRUEsTUFtREEsRUFsRDJCQSxJQUN2QixNQUFNQyxFQUFZQyxTQUFTQyxjQUFjSCxHQUV6Q0MsRUFBVUcsWUFBYyxHQUV4QixJQUFLLElBQUlDLEVBQU0sRUFBR0EsRUFBTSxHQUFJQSxHQUFPLEVBQ2pDLElBQUssSUFBSUMsRUFBTSxFQUFHQSxFQUFNLEdBQUlBLEdBQU8sRUFBRyxDQUNwQyxNQUFNQyxFQUFhLElBQWVDLHNCQUFzQixDQUFDSCxFQUFLQyxJQUN4REcsRUFBU1AsU0FBU1EsY0FBYyxPQUN0Q0QsRUFBT0UsVUFBVUMsSUFBSSxVQUNyQkgsRUFBT0ksUUFBUU4sV0FBYUEsRUFFNUJOLEVBQVVhLFlBQVlMLEVBQ3hCLENBQ0YsRUFvQ0osRUFqQytCLENBQUNULEVBQWtCZSxLQUM1QmIsU0FBU0MsY0FBY0gsR0FFL0JnQixpQkFBaUIsV0FBV0MsU0FBU1IsSUFDN0NNLEVBQWVFLFNBQVNDLElBQ3RCVCxFQUFPVSxpQkFBaUJELEVBQVNFLFVBQVdGLEVBQVNHLFFBQVEsR0FDN0QsR0FDRixFQTBCTixFQXZCNEJDLElBQ0ZwQixTQUFTQyxjQUFjLFdBQy9CQyxZQUFjLEdBQUdrQixRQUFhLEVBcUJoRCxFQWxCMEJ0QixJQUNKRSxTQUFTQyxjQUFjSCxHQUNmZ0IsaUJBQWlCLFdBRW5DQyxTQUFTUixJQUNLQSxFQUNSYyxVQUFZLFFBQVEsR0FDaEMsRSxhQzdCYSxNQUNqQixNQUFNQyxHQUFrQixVQUNsQkMsR0FBb0IsVUFFcEJDLEdBQVcsUUFBYyxZQUUvQixJQUFJQyxFQUFtQixFQUNuQkMsR0FBb0IsRUFDcEJDLEdBQWEsRUFDYlAsRUFBUyxLQUViLE1BME1NUSxFQUFnQkMsSUFDcEIsSUFBS0gsRUFBbUIsQ0FDdEIsTUFBTW5CLEVBQVNzQixFQUFFQyxPQUVYekIsRUFBYUUsRUFBT0ksUUFBUU4sV0FJN0JrQixFQUFrQlEseUJBQXlCQyxTQUFTM0IsS0FFbENrQixFQUFrQlUsY0FBYzVCLEdBR25ERSxFQUFPRSxVQUFVQyxJQUFJLE9BRXJCSCxFQUFPRSxVQUFVQyxJQUFJLFFBR25CYSxFQUFrQlcsaUJBQ3BCZCxFQUFTLE1BQ1QsRUFBMEJBLEdBQzFCLElBQVdlLFlBQ1RuQyxTQUFTQyxjQUFjLGtCQUN2QixTQWxFYSxNQUNyQixJQUFLeUIsRUFBbUIsQ0FDdEIsTUFBTXJCLEVBQWFtQixFQUFTWSxPQUMxQmQsRUFDQUUsRUFBU2Esa0JBQ1RiLEVBQVNjLGtCQUdMQyxFQUFlakIsRUFBZ0JXLGNBQWM1QixHQUVuRG1DLFFBQVFDLElBQUksd0JBQXdCcEMsS0FFcEMsTUFBTUUsRUFBU1AsU0FBU0MsY0FDdEIsdUNBQXVDSSxPQUdyQ2tDLEdBQ0ZoQyxFQUFPRSxVQUFVQyxJQUFJLE9BRXJCYyxFQUFTYSxrQkFBb0JoQyxFQUVLLE9BQTlCbUIsRUFBU2MsbUJBQ1hkLEVBQVNjLGlCQUFtQixRQUVwQkMsR0FBZ0JmLEVBQVNhLGtCQUNuQzlCLEVBQU9FLFVBQVVDLElBQUksUUFDWDZCLEdBQWlCZixFQUFTYSxvQkFDcEM5QixFQUFPRSxVQUFVQyxJQUFJLFFBRXJCYyxFQUFTYSxrQkFBb0IsS0FDN0JiLEVBQVNjLGlCQUFtQixNQUUxQmhCLEVBQWdCWSxpQkFDbEJkLEVBQVMsZUFDVCxFQUEwQkEsR0FDMUIsSUFBV2UsWUFDVG5DLFNBQVNDLGNBQWMsa0JBQ3ZCLFFBR04sR0E4Qkl5QyxHQUVKLEdBR0lDLEVBQWMsS0FDbEJoQixHQUFjQSxDQUFVLEVBR3BCZCxFQUFpQixDQUNyQixDQUFFSyxVQUFXLFlBQWFDLFFBekhHVSxJQUM3QixHQUFJSCxFQUFtQixDQUVyQixNQUVNckIsRUFGU3dCLEVBQUVDLE9BRVNuQixRQUFRTixZQUM1QixPQUFFdUMsR0FBVyxJQUFXQyxVQUFVcEIsSUFFakNxQixFQUFVQyxHQUFZLElBQWVDLGlCQUFpQjNDLEdBRXRDNEMsTUFBTUMsS0FBSyxDQUFFTixXQUFVLENBQUNPLEVBQUdDLEtBRWhELE1BQU1qRCxFQUFNd0IsRUFBYW1CLEVBQVdNLEVBQUlOLEVBRWxDMUMsRUFBTXVCLEVBQWFvQixFQUFXQSxFQUFXSyxFQUMvQyxNQUFPLENBQ0xDLGNBQWVyRCxTQUFTQyxjQUN0Qix3Q0FBd0MsSUFBZUssc0JBQ3JELENBQUNILEVBQUtDLFNBR1gsSUFHWVcsU0FBUSxFQUFHc0Msb0JBRXBCQSxHQUVGQSxFQUFjNUMsVUFBVUMsSUFBSSxVQUM5QixHQUVKLElBMkZBLENBQUVRLFVBQVcsYUFBY0MsUUF4Rk0sS0FDVm5CLFNBQVNjLGlCQUFpQix1QkFDbENDLFNBQVN1QyxJQUN0QkEsRUFBYzdDLFVBQVU4QyxPQUFPLFVBQVUsR0FDekMsR0FxRkYsQ0FBRXJDLFVBQVcsUUFBU0MsUUEzTE1VLElBQzVCLEdBQUlILEVBQW1CLENBQ3JCLE1BQU1uQixFQUFTc0IsRUFBRUMsUUFDWCxXQUFFekIsR0FBZUUsRUFBT0ksU0FDeEIsT0FBRWlDLEdBQVcsSUFBV0MsVUFBVXBCLElBRWpDcUIsRUFBVUMsR0FBWSxJQUFlQyxpQkFBaUIzQyxHQUd2RG1ELEVBQWtCUCxNQUFNQyxLQUFLLENBQUVOLFdBQVUsQ0FBQ08sRUFBR0MsSUFLMUMsQ0FIS3pCLEVBQWFtQixFQUFXTSxFQUFJTixFQUU1Qm5CLEVBQWFvQixFQUFXQSxFQUFXSyxLQUszQ0ssR0FBTyxRQUFZYixHQUd6QixHQUZldEIsRUFBZ0JvQyxVQUFVRCxFQUFNRCxHQXVCN0MsR0FuQkFqRCxFQUFPRSxVQUFVQyxJQUFJLFVBQ3JCOEMsRUFBZ0J6QyxTQUFRLEVBQUVaLEVBQUtDLE1BQ1JKLFNBQVNDLGNBQzVCLHFCQUFxQixJQUFlSyxzQkFBc0IsQ0FDeERILEVBQ0FDLFNBR1NLLFVBQVVDLElBQUksVUFDTFYsU0FBU0MsY0FDN0Isd0NBQXdDLElBQWVLLHNCQUNyRCxDQUFDSCxFQUFLQyxTQUdJSyxVQUFVQyxJQUFJLFNBQVMsSUFHdkNlLEdBQW9CLEVBRWhCQSxJQUFxQixJQUFXb0IsVUFBVUQsT0FFNUNsQixHQUFvQixFQWxHRCxNQUN6QixJQUFLLE1BQU1pQyxLQUFZLElBQVdkLFVBQVcsQ0FDM0MsTUFBTSxPQUFFRCxHQUFXZSxFQUNiRixHQUFPLFFBQVliLEdBRW5CZ0IsRUFBVyxHQUNqQixJQUFJQyxFQUNBQyxHQUFTLEVBRWIsTUFBUUEsR0FBUSxDQUVkLE1BQU1oQixFQUFXaUIsS0FBS0MsTUFBTUQsS0FBS0UsU0FBV0wsR0FDdENiLEVBQVdnQixLQUFLQyxNQUFNRCxLQUFLRSxTQUFXTCxHQUc1Q2pDLEVBQWFvQyxLQUFLRSxTQUFXLEdBRXpCdEMsR0FBY21CLEVBQVdGLEdBQVVnQixFQUVyQ0MsRUFBY1osTUFBTUMsS0FBSyxDQUFFTixXQUFVLENBQUNPLEVBQUdDLElBQU0sQ0FDN0NOLEVBQVdNLEVBQ1hMLE1BRVFwQixHQUFjb0IsRUFBV0gsR0FBVWdCLElBRTdDQyxFQUFjWixNQUFNQyxLQUFLLENBQUVOLFdBQVUsQ0FBQ08sRUFBR0MsSUFBTSxDQUM3Q04sRUFDQUMsRUFBV0ssTUFJWFMsSUFFRkMsRUFBU3ZDLEVBQWtCbUMsVUFBVUQsRUFBTUksR0FFL0MsQ0FHQSxNQUFNeEQsRUFBYWtCLEVBQWtCMkMsbUJBQW1CVCxHQUd4RCxJQUFLLE1BQU90RCxFQUFLQyxLQUFRQyxFQUFZLENBQ25DLE1BQU04RCxFQUFzQixJQUFlN0Qsc0JBQXNCLENBQy9ESCxFQUNBQyxJQUVtQkosU0FBU0MsY0FDNUIseUNBQXlDa0UsT0FFOUIxRCxVQUFVQyxJQUFJLFNBQzdCLENBQ0YsR0FnRE0wRCxHQUNBQyxZQUFXLEtBRVQsSUFBV2xDLFlBQ1RuQyxTQUFTQyxjQUFjLGtCQUN2QixPQUNELEdBQ0EsU0FDRSxDQUdMLE1BQU1xRSxFQUFlLElBQVd6QixVQUFVcEIsR0FBa0I4QyxLQUU1RHZFLFNBQVNDLGNBQWMsY0FBY0MsWUFBY29FLENBQ3JELENBRUosS0FrTEYsTUFBTyxDQUNMRSxLQTFCVyxLQUNYLElBQVdyQyxZQUFZbkMsU0FBU0MsY0FBYyxrQkFBbUIsUUFDakUsRUFBeUIsc0JBQ3pCLEVBQXlCLHFCQUN6QixFQUF5Qix1QkFDekIsRUFBOEIscUJBQXNCWSxHQUU1QmIsU0FBU2MsaUJBQy9CLCtCQUVjQyxTQUFTUixJQUN2QkEsRUFBT1UsaUJBQWlCLFFBQVNXLEVBQWEsSUFHOUI1QixTQUFTQyxjQUFjLGNBQy9CZ0IsaUJBQWlCLFFBQVMwQixHQUVaM0MsU0FBU0MsY0FBYyxZQUMvQmdCLGlCQUFpQixTQUFTLEtBeEMxQ1EsRUFBbUIsRUFDbkJDLEdBQW9CLEVBQ3BCQyxHQUFhLEVBQ2JQLEVBQVMsS0FHVEUsRUFBZ0JtRCxRQUNoQmxELEVBQWtCa0QsUUFHbEJqRCxFQUFTa0QsV0FHVCxFQUF3QixzQkFDeEIsRUFBd0IscUJBQ3hCLEVBQXdCLHVCQUd4QjFFLFNBQVNDLGNBQWMsY0FBY0MsWUFDbkMsSUFBVzJDLFVBQVUsR0FBRzBCLEtBdUJ4QixJQUFXcEMsWUFBWW5DLFNBQVNDLGNBQWMsa0JBQW1CLFFBQ2pFLElBQVdrQyxZQUFZbkMsU0FBU0MsY0FBYyxrQkFBbUIsT0FBTyxHQUN4RSxFQU1MLEVBblRrQixHQXFUUnVFLE0saUVDaFVKLE1BQU1HLEVBQWUvQixJQUMxQixJQUFJZ0MsRUFBTyxFQVFYLE1BQU8sQ0FDTGhDLFNBQ0FpQyxJQVJVLEtBQ1ZELEdBQVEsQ0FBQyxFQVFURSxPQUxhLElBQU1GLEdBQVFoQyxFQU12QmdDLFdBS0YsT0FBT0EsQ0FDVCxFQUNELEVBR1VHLEVBQW1CLEtBQzlCLE1BQU1uQixFQUFXLEdBQ1hvQixFQUFPL0IsTUFBTUMsS0FBSyxDQUFFTixPQUFRZ0IsSUFBWSxJQUM1Q1gsTUFBTVcsR0FBVXFCLEtBQUssUUFHdkIsSUFBSUMsRUFBc0IsR0FDdEJDLEVBQWdCLEdBRXBCLE1BdURNQyxFQUFXLEtBQ2YsTUFBTUMsRUFBUSxHQUdkLElBQUssSUFBSWxGLEVBQU0sRUFBR0EsRUFBTXlELEVBQVV6RCxHQUFPLEVBQ3ZDLElBQUssSUFBSUMsRUFBTSxFQUFHQSxFQUFNd0QsRUFBVXhELEdBQU8sRUFBRyxDQUMxQyxNQUFNa0YsRUFBT04sRUFBSzdFLEdBQUtDLEdBR1osT0FBVGtGLElBQ0FBLEVBQUs3QixNQUNKNEIsRUFBTXJELFNBQVNzRCxFQUFLN0IsT0FDcEI2QixFQUFLN0IsS0FBS3FCLFVBR1hPLEVBQU1FLEtBQUtELEVBQUs3QixLQUVwQixDQUdGLE9BQU80QixDQUFLLEVBb0ZkLE1BQU8sQ0FDTEcsUUFoS2MsSUFBTVIsRUFpS3BCdEIsVUEvSmdCLENBQUNELEVBQU1JLEtBRXZCLE1BQU00QixFQUFtQjVCLEVBQVk2QixPQUNuQyxFQUFFdkYsRUFBS0MsS0FBU0QsR0FBTyxHQUFLQSxFQUFNeUQsR0FBWXhELEdBQU8sR0FBS0EsRUFBTXdELElBSTVEK0IsRUFBWTlCLEVBQVkrQixNQUFLLEVBQUV6RixFQUFLQyxLQUE0QixPQUFuQjRFLEVBQUs3RSxHQUFLQyxLQUd2RHlGLEVBQW9CaEMsRUFBWStCLE1BQUssRUFBRXpGLEVBQUtDLEtBRXBCLENBQzFCLENBQUNELEVBQU0sRUFBR0MsR0FDVixDQUFDRCxFQUFNLEVBQUdDLEdBQ1YsQ0FBQ0QsRUFBS0MsRUFBTSxHQUNaLENBQUNELEVBQUtDLEVBQU0sR0FDWixDQUFDRCxFQUFNLEVBQUdDLEVBQU0sR0FDaEIsQ0FBQ0QsRUFBTSxFQUFHQyxFQUFNLEdBQ2hCLENBQUNELEVBQU0sRUFBR0MsRUFBTSxHQUNoQixDQUFDRCxFQUFNLEVBQUdDLEVBQU0sSUFJU3dGLE1BQ3pCLEVBQUVFLEVBQVFDLEtBQ1JELEdBQVUsR0FDVkEsRUFBU2xDLEdBQ1RtQyxHQUFVLEdBQ1ZBLEVBQVNuQyxHQUNrQixPQUEzQm9CLEVBQUtjLEtBQVVDLE9BS3JCLEdBQUlOLElBQXFCRSxJQUFjRSxFQUFtQixDQUV4RCxNQUFNRyxFQUFXLENBQ2Z2QyxPQUNBSSxlQVFGLE9BSkFtQyxFQUFTbkMsWUFBWTlDLFNBQVEsRUFBRVosRUFBS0MsTUFDbEM0RSxFQUFLN0UsR0FBS0MsR0FBTzRGLENBQVEsS0FHcEIsQ0FDVCxDQUVBLE9BQU8sQ0FBSyxFQThHWlosV0FDQWEsWUFyRmtCLEtBQ2xCLE1BQU1aLEVBQVEsR0FHZCxJQUFLLElBQUlsRixFQUFNLEVBQUdBLEVBQU15RCxFQUFVekQsR0FBTyxFQUN2QyxJQUFLLElBQUlDLEVBQU0sRUFBR0EsRUFBTXdELEVBQVV4RCxHQUFPLEVBQUcsQ0FDMUMsTUFBTWtGLEVBQU9OLEVBQUs3RSxHQUFLQyxHQUVWLE9BQVRrRixHQUFpQkEsRUFBSzdCLE9BQVM0QixFQUFNckQsU0FBU3NELEVBQUs3QixPQUVyRDRCLEVBQU1FLEtBQUtELEVBQUs3QixLQUVwQixDQUdGLE9BQU80QixDQUFLLEVBdUVabkIsbUJBcEUwQlQsSUFDMUIsTUFBTUksRUFBYyxHQUdwQixJQUFLLElBQUkxRCxFQUFNLEVBQUdBLEVBQU15RCxFQUFVekQsR0FBTyxFQUN2QyxJQUFLLElBQUlDLEVBQU0sRUFBR0EsRUFBTXdELEVBQVV4RCxHQUFPLEVBQUcsQ0FDMUMsTUFBTWtGLEVBQU9OLEVBQUs3RSxHQUFLQyxHQUVuQmtGLEdBQVFBLEVBQUs3QixPQUFTQSxHQUV4QkksRUFBWTBCLEtBQUssQ0FBQ3BGLEVBQUtDLEdBRTNCLENBR0YsT0FBT3lELENBQVcsRUFzRGxCNUIsY0FuRHFCNUIsSUFDckIsTUFBTzZGLEVBQWNDLEdBQWE5RixFQUM1QkYsRUFBTWlHLFNBQVNELEVBQVcsSUFDMUIvRixFQUFNOEYsRUFBYUcsV0FBVyxHQUFLLEdBQ25DZixFQUFPTixFQUFLN0UsR0FBS0MsR0FFdkIsR0FBYSxPQUFUa0YsRUFBZSxDQUVqQixNQUFNLEtBQUU3QixHQUFTNkIsRUFHakIsT0FGQTdCLEVBQUtvQixNQUNMSyxFQUFvQkssS0FBS2xGLEdBQ2xCb0QsQ0FDVCxDQUlBLE9BRkEwQixFQUFjSSxLQUFLbEYsR0FDbkI2RSxFQUFvQkssS0FBS2xGLEdBQ2xCLElBQUksRUFvQ1hpRyxpQkFYdUIsSUFBTW5CLEVBWTdCcEQsdUJBVjZCLElBQU1tRCxFQVduQ2hELGFBbkNtQixJQUNMa0QsSUFHT00sT0FBT2pDLEdBQVNBLEVBQUtxQixXQWdDMUNMLE1BM0JZLEtBRVpPLEVBQUtqRSxTQUFRLENBQUNaLEVBQUtvRyxLQUNqQnBHLEVBQUlZLFNBQVEsQ0FBQ29DLEVBQUdxRCxLQUNkeEIsRUFBS3VCLEdBQVVDLEdBQVksSUFBSSxHQUMvQixJQUlKdEIsRUFBc0IsR0FDdEJDLEVBQWdCLEVBQUUsRUFrQm5CLEVBR1VzQixFQUFnQixDQUFDQyxFQUFNcEUsRUFBa0JELEtBQ3BELE1BQU02QyxFQUFzQixJQUFJeUIsSUFFMUJDLEVBQStCLENBQUN2RyxFQUFZd0csS0FDaEQsTUFBT0MsRUFBV1gsR0FBYTlGLEVBSS9CLElBQUkwRyxFQUhRWCxTQUFTRCxFQUFXLElBSTVCYSxFQUhRRixFQUFVVCxXQUFXLEdBQUssR0FLdEMsT0FBUVEsR0FDTixJQUFLLEtBQ0hFLEdBQVcsRUFDWCxNQUNGLElBQUssT0FDSEEsR0FBVyxFQUNYLE1BQ0YsSUFBSyxPQUNIQyxHQUFXLEVBQ1gsTUFDRixJQUFLLFFBQ0hBLEdBQVcsRUFNZixPQUFPLElBQWUxRyxzQkFBc0IsQ0FBQ3lHLEVBQVNDLEdBQVMsRUFHM0RDLEVBQW9CLEtBQ3hCLE1BQU1DLEVBQWEsQ0FBQyxLQUFNLE9BQVEsT0FBUSxTQUMxQyxHQUFLNUUsRUFNRSxDQUVMLE1BQU02RSxFQUFRRCxFQUFXRSxRQUFROUUsSUFDbEIsSUFBWDZFLElBQ0ZELEVBQVdHLE9BQU9GLEVBQU8sR0FDekJELEVBQVczQixLQUFLakQsR0FDaEJFLFFBQVFDLElBQUlILEdBRWhCLE1BWkUsSUFBSyxJQUFJYyxFQUFJOEQsRUFBV3RFLE9BQVMsRUFBR1EsRUFBSSxFQUFHQSxHQUFLLEVBQUcsQ0FDakQsTUFBTWtFLEVBQUl2RCxLQUFLQyxNQUFNRCxLQUFLRSxVQUFZYixFQUFJLEtBQ3pDOEQsRUFBVzlELEdBQUk4RCxFQUFXSSxJQUFNLENBQUNKLEVBQVdJLEdBQUlKLEVBQVc5RCxHQUM5RCxDQVVGLE9BQU84RCxDQUFVLEVBK0RuQixNQUFPLENBQ0xSLE9BQ0FyRSxvQkFDQUMsbUJBQ0FGLE9BL0RhLENBQUNtRixFQUFnQmxGLEVBQW1CQyxLQUNqRCxNQUFNc0IsRUFBVzJELEVBQWUvQixVQUFVNUMsT0FDcEM0RSxFQUFtQixJQUFlQyx1QkFBdUI3RCxHQUUvRCxJQUFJdkQsRUFBYSxHQUtqQixHQUhBbUMsUUFBUUMsSUFBSSxzQkFBc0JKLEtBQ2xDRyxRQUFRQyxJQUFJLHFCQUFxQkgsS0FFN0JELEdBQXFCQyxFQUFrQixDQUV6QyxNQUFNb0YsRUFBa0JULElBSXhCLElBQUssTUFBTUosS0FBYWEsRUFHdEIsR0FGQXJILEVBQWF1RyxFQUE2QnZFLEVBQW1Cd0UsR0FHM0RXLEVBQWlCeEYsU0FBUzNCLEtBQ3pCNkUsRUFBb0J5QyxJQUFJdEgsS0FDeEJrSCxFQUFleEYseUJBQXlCQyxTQUFTM0IsR0FTbEQsT0FOQTZFLEVBQW9CeEUsSUFBSUwsR0FHeEJnQyxFQUFvQmhDLEVBRXBCaUMsRUFBbUJ1RSxFQUNaeEcsQ0FHYixDQUlBLEdBRUVBLEVBQWFtSCxFQURPekQsS0FBS0MsTUFBTUQsS0FBS0UsU0FBV3VELEVBQWlCNUUsZUFHaEVzQyxFQUFvQnlDLElBQUl0SCxJQUN4QmtILEVBQWV4Rix5QkFBeUJDLFNBQVMzQixJQU1uRCxPQUZBNkUsRUFBb0J4RSxJQUFJTCxHQUVqQkEsQ0FBVSxFQWdCakJ1SCxlQWJxQixJQUFNMUMsRUFjM0JSLFNBWmUsS0FDZlEsRUFBb0IyQyxPQUFPLEVBWTVCLEMseUNDclVJLE1BQU1DLEVBQWlCLE1BQzVCLE1BQU1OLEVBQW1CLEdBUW5CbEgsRUFBd0IsRUFBRUgsRUFBSzRILEtBQ2hCQyxPQUFPQyxhQUFhRixFQUFTLElBQzVCNUgsRUFjdEIsTUFBTyxDQUNMNkMsaUJBdkJ3QjNDLElBQ3hCLE1BQU0wSCxFQUFTMUgsRUFBV2dHLFdBQVcsR0FBSyxHQUUxQyxNQUFPLENBREtELFNBQVMvRixFQUFXNkgsTUFBTSxHQUFJLElBQzdCSCxFQUFPLEVBcUJwQnpILHdCQUNBbUgsdUJBZDhCN0QsSUFDOUIsSUFBSyxJQUFJekQsRUFBTSxFQUFHQSxFQUFNeUQsRUFBVXpELEdBQU8sRUFDdkMsSUFBSyxJQUFJQyxFQUFNLEVBQUdBLEVBQU13RCxFQUFVeEQsR0FBTyxFQUFHLENBQzFDLE1BQU0rSCxFQUF5QjdILEVBQXNCLENBQUNILEVBQUtDLElBQzNEb0gsRUFBaUJqQyxLQUFLNEMsRUFDeEIsQ0FHRixPQUFPWCxDQUFnQixFQVExQixFQTlCNkIsR0FnQ2pCWSxFQW1CSixDQUNMdkYsVUFuQmdCLENBQ2hCLENBQUUwQixLQUFNLFVBQVczQixPQUFRLEdBQzNCLENBQUUyQixLQUFNLGFBQWMzQixPQUFRLEdBQzlCLENBQUUyQixLQUFNLFlBQWEzQixPQUFRLEdBQzdCLENBQUUyQixLQUFNLFlBQWEzQixPQUFRLEdBQzdCLENBQUUyQixLQUFNLGNBQWUzQixPQUFRLElBZS9CVCxZQVprQixDQUFDa0csRUFBT0MsS0FDMUIsTUFBTUMsRUFBZUYsRUFHZkcsRUFBMEIsU0FBWEYsRUFBb0IsT0FBUyxPQURsQ0QsRUFBTUksUUFBUSxZQUd0QkMsTUFBTUMsUUFBVUgsRUFDeEJELEVBQWFHLE1BQU1DLFFBQVVILENBQVksRSxHQy9DekNJLEVBQTJCLENBQUMsRUFHaEMsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsQ0FBQyxHQU9YLE9BSEFFLEVBQW9CTCxHQUFVSSxFQUFRQSxFQUFPRCxRQUFTSixHQUcvQ0ssRUFBT0QsT0FDZixDQ3JCQUosRUFBb0JPLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYUixFQUFvQlUsRUFBRUYsRUFBWUMsS0FBU1QsRUFBb0JVLEVBQUVOLEVBQVNLLElBQzVFRSxPQUFPQyxlQUFlUixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsSUFFMUUsRUNORFQsRUFBb0JVLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NFbEZoQixFQUFvQixLQUVNQSxFQUFvQixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9mYWN0b3JpZXMuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy91dGlscy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGYWN0b3J5SGVscGVycyB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmNvbnN0IFJlbmRlcmVyID0gKCgpID0+IHtcbiAgY29uc3QgcmVuZGVyR2FtZWJvYXJkID0gKGNvbnRhaW5lckVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lckVsZW1lbnQpO1xuXG4gICAgY29udGFpbmVyLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IDEwOyByb3cgKz0gMSkge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgMTA7IGNvbCArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBGYWN0b3J5SGVscGVycy5jb252ZXJ0VG9BbHBoYW51bWVyaWMoW3JvdywgY29sXSk7XG4gICAgICAgIGNvbnN0IHNxdWFyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwic3F1YXJlXCIpO1xuICAgICAgICBzcXVhcmUuZGF0YXNldC5jb29yZGluYXRlID0gY29vcmRpbmF0ZTtcblxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3F1YXJlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYXR0YWNoRXZlbnRMaXN0ZW5lcnMgPSAoY29udGFpbmVyRWxlbWVudCwgZXZlbnRMaXN0ZW5lcnMpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lckVsZW1lbnQpO1xuXG4gICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3F1YXJlXCIpLmZvckVhY2goKHNxdWFyZSkgPT4ge1xuICAgICAgZXZlbnRMaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IHtcbiAgICAgICAgc3F1YXJlLmFkZEV2ZW50TGlzdGVuZXIobGlzdGVuZXIuZXZlbnRUeXBlLCBsaXN0ZW5lci5oYW5kbGVyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHNldFdpbm5lckhlYWRpbmcgPSAod2lubmVyKSA9PiB7XG4gICAgY29uc3Qgd2lubmVySGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjd2lubmVyXCIpO1xuICAgIHdpbm5lckhlYWRpbmcudGV4dENvbnRlbnQgPSBgJHt3aW5uZXJ9IHdvbiFgO1xuICB9O1xuXG4gIGNvbnN0IGNsZWFyR2FtZWJvYXJkID0gKGNvbnRhaW5lckVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lckVsZW1lbnQpO1xuICAgIGNvbnN0IHNxdWFyZXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5zcXVhcmVcIik7XG5cbiAgICBzcXVhcmVzLmZvckVhY2goKHNxdWFyZSkgPT4ge1xuICAgICAgY29uc3QgcmVzZXRTcXVhcmUgPSBzcXVhcmU7XG4gICAgICByZXNldFNxdWFyZS5jbGFzc05hbWUgPSBcInNxdWFyZVwiOyAvLyBSZXNldCB0aGUgY2xhc3NOYW1lIHRvIHJlbW92ZSBhbGwgY2xhc3Nlc1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgcmVuZGVyR2FtZWJvYXJkLFxuICAgIGF0dGFjaEV2ZW50TGlzdGVuZXJzLFxuICAgIHNldFdpbm5lckhlYWRpbmcsXG4gICAgY2xlYXJHYW1lYm9hcmQsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJlcjtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtc3ludGF4ICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1sb25lbHktaWYgKi9cbmltcG9ydCB7IEFwcEhlbHBlcnMsIEZhY3RvcnlIZWxwZXJzIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCBSZW5kZXJlciBmcm9tIFwiLi9yZW5kZXJcIjtcbmltcG9ydCB7IFNoaXBGYWN0b3J5LCBHYW1lYm9hcmRGYWN0b3J5LCBQbGF5ZXJGYWN0b3J5IH0gZnJvbSBcIi4vZmFjdG9yaWVzXCI7XG5cbi8vIDEuIC0tLVxuLy8gMi4gLS0tXG4vLyAzLiAtLS1cbi8vIDQuIE1ha2UgdGhlIGNvbXB1dGVyIHRyeSBhZGphY2VudCBsb2NhdGlvbnMgaWYgZ2V0dGluZyBhIGhpdFxuLy8gNC4gU3R5bGUgPT4gTW9kYWxzXG4vLyA1LiBQdXNoIHRvIGdoLXBhZ2VzIGFuZCBhZGQgcmVhZG1lXG5cbmNvbnN0IENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICBjb25zdCBwbGF5ZXJHYW1lYm9hcmQgPSBHYW1lYm9hcmRGYWN0b3J5KCk7XG4gIGNvbnN0IGNvbXB1dGVyR2FtZWJvYXJkID0gR2FtZWJvYXJkRmFjdG9yeSgpO1xuXG4gIGNvbnN0IGNvbXB1dGVyID0gUGxheWVyRmFjdG9yeShcImNvbXB1dGVyXCIpO1xuXG4gIGxldCBjdXJyZW50U2hpcEluZGV4ID0gMDtcbiAgbGV0IHNoaXBQbGFjZW1lbnRNb2RlID0gdHJ1ZTtcbiAgbGV0IGlzVmVydGljYWwgPSBmYWxzZTtcbiAgbGV0IHdpbm5lciA9IG51bGw7XG5cbiAgY29uc3QgcGxhY2VDb21wdXRlclNoaXBzID0gKCkgPT4ge1xuICAgIGZvciAoY29uc3Qgc2hpcFR5cGUgb2YgQXBwSGVscGVycy5zaGlwVHlwZXMpIHtcbiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBzaGlwVHlwZTtcbiAgICAgIGNvbnN0IHNoaXAgPSBTaGlwRmFjdG9yeShsZW5ndGgpO1xuXG4gICAgICBjb25zdCBncmlkU2l6ZSA9IDEwO1xuICAgICAgbGV0IGNvb3JkaW5hdGVzO1xuICAgICAgbGV0IHBsYWNlZCA9IGZhbHNlO1xuXG4gICAgICB3aGlsZSAoIXBsYWNlZCkge1xuICAgICAgICAvLyBHZW5lcmF0ZSByYW5kb20gc3RhcnRSb3cgYW5kIHN0YXJ0Q29sIHdpdGhpbiB0aGUgZ3JpZCBib3VuZGFyaWVzXG4gICAgICAgIGNvbnN0IHN0YXJ0Um93ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZ3JpZFNpemUpO1xuICAgICAgICBjb25zdCBzdGFydENvbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGdyaWRTaXplKTtcblxuICAgICAgICAvLyBSYW5kb21seSBjaG9vc2Ugd2hldGhlciB0aGUgc2hpcCB3aWxsIGJlIHBsYWNlZCB2ZXJ0aWNhbGx5IG9yIGhvcml6b250YWxseVxuICAgICAgICBpc1ZlcnRpY2FsID0gTWF0aC5yYW5kb20oKSA8IDAuNTtcblxuICAgICAgICBpZiAoaXNWZXJ0aWNhbCAmJiBzdGFydFJvdyArIGxlbmd0aCA8PSBncmlkU2l6ZSkge1xuICAgICAgICAgIC8vIEdlbmVyYXRlIHRoZSBjb29yZGluYXRlcyBmb3IgYSB2ZXJ0aWNhbGx5IHBsYWNlZCBzaGlwXG4gICAgICAgICAgY29vcmRpbmF0ZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBpKSA9PiBbXG4gICAgICAgICAgICBzdGFydFJvdyArIGksXG4gICAgICAgICAgICBzdGFydENvbCxcbiAgICAgICAgICBdKTtcbiAgICAgICAgfSBlbHNlIGlmICghaXNWZXJ0aWNhbCAmJiBzdGFydENvbCArIGxlbmd0aCA8PSBncmlkU2l6ZSkge1xuICAgICAgICAgIC8vIEdlbmVyYXRlIHRoZSBjb29yZGluYXRlcyBmb3IgYSBob3Jpem9udGFsbHkgcGxhY2VkIHNoaXBcbiAgICAgICAgICBjb29yZGluYXRlcyA9IEFycmF5LmZyb20oeyBsZW5ndGggfSwgKF8sIGkpID0+IFtcbiAgICAgICAgICAgIHN0YXJ0Um93LFxuICAgICAgICAgICAgc3RhcnRDb2wgKyBpLFxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNoaXAgY2FuIGJlIHBsYWNlZCBhdCB0aGUgZ2VuZXJhdGVkIGNvb3JkaW5hdGVzXG4gICAgICAgICAgcGxhY2VkID0gY29tcHV0ZXJHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXAsIGNvb3JkaW5hdGVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdGhlIHNoaXAgY29vcmRpbmF0ZXNcbiAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBjb21wdXRlckdhbWVib2FyZC5nZXRTaGlwQ29vcmRpbmF0ZXMoc2hpcCk7XG5cbiAgICAgIC8vIExvb3AgdGhyb3VnaCB0aGVtIGFuZCBhZGQgYSBwbGFjZWQgY2xhc3NcbiAgICAgIGZvciAoY29uc3QgW3JvdywgY29sXSBvZiBjb29yZGluYXRlKSB7XG4gICAgICAgIGNvbnN0IGNvbnZlcnRlZENvb3JkaW5hdGUgPSBGYWN0b3J5SGVscGVycy5jb252ZXJ0VG9BbHBoYW51bWVyaWMoW1xuICAgICAgICAgIHJvdyxcbiAgICAgICAgICBjb2wsXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBwbGFjZWRTcXVhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgIGAuZ2FtZWJvYXJkLmNvbXB1dGVyIFtkYXRhLWNvb3JkaW5hdGU9XCIke2NvbnZlcnRlZENvb3JkaW5hdGV9XCJdYFxuICAgICAgICApO1xuICAgICAgICBwbGFjZWRTcXVhcmUuY2xhc3NMaXN0LmFkZChcInBsYWNlZFwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3Qgc2hpcFBsYWNlbWVudEhhbmRsZXIgPSAoZSkgPT4ge1xuICAgIGlmIChzaGlwUGxhY2VtZW50TW9kZSkge1xuICAgICAgY29uc3Qgc3F1YXJlID0gZS50YXJnZXQ7XG4gICAgICBjb25zdCB7IGNvb3JkaW5hdGUgfSA9IHNxdWFyZS5kYXRhc2V0O1xuICAgICAgY29uc3QgeyBsZW5ndGggfSA9IEFwcEhlbHBlcnMuc2hpcFR5cGVzW2N1cnJlbnRTaGlwSW5kZXhdO1xuXG4gICAgICBjb25zdCBbc3RhcnRSb3csIHN0YXJ0Q29sXSA9IEZhY3RvcnlIZWxwZXJzLmNvbnZlcnRUb0luZGljZXMoY29vcmRpbmF0ZSk7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGFuIGFycmF5IG9mIHNoaXAgY29vcmRpbmF0ZXMgYmFzZWQgb24gdGhlIHNoaXAgbGVuZ3RoXG4gICAgICBjb25zdCBzaGlwQ29vcmRpbmF0ZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgcm93IGNvb3JkaW5hdGUgYmFzZWQgb24gdmVydGljYWwgb3IgaG9yaXpvbnRhbCBwbGFjZW1lbnRcbiAgICAgICAgY29uc3Qgcm93ID0gaXNWZXJ0aWNhbCA/IHN0YXJ0Um93ICsgaSA6IHN0YXJ0Um93O1xuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGNvbHVtbiBjb29yZGluYXRlIGJhc2VkIG9uIHZlcnRpY2FsIG9yIGhvcml6b250YWwgcGxhY2VtZW50XG4gICAgICAgIGNvbnN0IGNvbCA9IGlzVmVydGljYWwgPyBzdGFydENvbCA6IHN0YXJ0Q29sICsgaTtcbiAgICAgICAgcmV0dXJuIFtyb3csIGNvbF07IC8vIFJldHVybiB0aGUgY29vcmRpbmF0ZSBwYWlyXG4gICAgICB9KTtcblxuICAgICAgLy8gQXR0ZW1wdCB0byBwbGFjZSB0aGUgc2hpcCBvbiB0aGUgcGxheWVyIGdhbWVib2FyZFxuICAgICAgY29uc3Qgc2hpcCA9IFNoaXBGYWN0b3J5KGxlbmd0aCk7XG4gICAgICBjb25zdCBwbGFjZWQgPSBwbGF5ZXJHYW1lYm9hcmQucGxhY2VTaGlwKHNoaXAsIHNoaXBDb29yZGluYXRlcyk7XG5cbiAgICAgIGlmIChwbGFjZWQpIHtcbiAgICAgICAgLy8gSWYgc2hpcCBwbGFjZW1lbnQgaXMgc3VjY2Vzc2Z1bFxuICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcInBsYWNlZFwiKTtcbiAgICAgICAgc2hpcENvb3JkaW5hdGVzLmZvckVhY2goKFtyb3csIGNvbF0pID0+IHtcbiAgICAgICAgICBjb25zdCBwbGFjZWRTcXVhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgYFtkYXRhLWNvb3JkaW5hdGU9XCIke0ZhY3RvcnlIZWxwZXJzLmNvbnZlcnRUb0FscGhhbnVtZXJpYyhbXG4gICAgICAgICAgICAgIHJvdyxcbiAgICAgICAgICAgICAgY29sLFxuICAgICAgICAgICAgXSl9XCJdYFxuICAgICAgICAgICk7XG4gICAgICAgICAgcGxhY2VkU3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJwbGFjZWRcIik7XG4gICAgICAgICAgY29uc3QgaW5pdGlhbFNxdWFyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICBgLmdhbWVib2FyZC5pbml0aWFsIFtkYXRhLWNvb3JkaW5hdGU9XCIke0ZhY3RvcnlIZWxwZXJzLmNvbnZlcnRUb0FscGhhbnVtZXJpYyhcbiAgICAgICAgICAgICAgW3JvdywgY29sXVxuICAgICAgICAgICAgKX1cIl1gXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpbml0aWFsU3F1YXJlLmNsYXNzTGlzdC5hZGQoXCJwbGFjZWRcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnRTaGlwSW5kZXggKz0gMTsgLy8gSW5jcmVtZW50IHRoZSBjdXJyZW50U2hpcEluZGV4IHRvIG1vdmUgdG8gdGhlIG5leHQgc2hpcFxuXG4gICAgICAgIGlmIChjdXJyZW50U2hpcEluZGV4ID09PSBBcHBIZWxwZXJzLnNoaXBUeXBlcy5sZW5ndGgpIHtcbiAgICAgICAgICAvLyBJZiBhbGwgc2hpcHMgaGF2ZSBiZWVuIHBsYWNlZFxuICAgICAgICAgIHNoaXBQbGFjZW1lbnRNb2RlID0gZmFsc2U7IC8vIERpc2FibGUgc2hpcCBwbGFjZW1lbnQgbW9kZVxuICAgICAgICAgIHBsYWNlQ29tcHV0ZXJTaGlwcygpOyAvLyBQbGFjZSB0aGUgY29tcHV0ZXIncyBzaGlwc1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2V0IGEgdGltZW91dCB0byBkZWxheSBoaWRpbmcgdGhlIGluaXRpYWwgc2hpcCBwbGFjZW1lbnQgbW9kYWxcbiAgICAgICAgICAgIEFwcEhlbHBlcnMudG9nZ2xlTW9kYWwoXG4gICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwuaW5pdGlhbFwiKSxcbiAgICAgICAgICAgICAgXCJoaWRlXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgc3RpbGwgc2hpcHMgdG8gYmUgcGxhY2VkXG4gICAgICAgICAgLy8gR2V0IHRoZSB0eXBlIG9mIHRoZSBuZXh0IHNoaXAgYmFzZWQgb24gdGhlIGN1cnJlbnRTaGlwSW5kZXhcbiAgICAgICAgICBjb25zdCBuZXh0U2hpcFR5cGUgPSBBcHBIZWxwZXJzLnNoaXBUeXBlc1tjdXJyZW50U2hpcEluZGV4XS50eXBlO1xuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2hpcCB0eXBlIHRleHQgb24gdGhlIFVJXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaGlwLXR5cGVcIikudGV4dENvbnRlbnQgPSBuZXh0U2hpcFR5cGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZ2FtZWJvYXJkSG92ZXJIYW5kbGVyID0gKGUpID0+IHtcbiAgICBpZiAoc2hpcFBsYWNlbWVudE1vZGUpIHtcbiAgICAgIC8vIENoZWNrIGlmIHNoaXAgcGxhY2VtZW50IG1vZGUgaXMgYWN0aXZlXG4gICAgICBjb25zdCBzcXVhcmUgPSBlLnRhcmdldDtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IHNxdWFyZS5kYXRhc2V0LmNvb3JkaW5hdGU7XG4gICAgICBjb25zdCB7IGxlbmd0aCB9ID0gQXBwSGVscGVycy5zaGlwVHlwZXNbY3VycmVudFNoaXBJbmRleF07IC8vIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSBzaGlwXG5cbiAgICAgIGNvbnN0IFtzdGFydFJvdywgc3RhcnRDb2xdID0gRmFjdG9yeUhlbHBlcnMuY29udmVydFRvSW5kaWNlcyhjb29yZGluYXRlKTtcbiAgICAgIC8vIEdlbmVyYXRlIGFuIGFycmF5IG9mIGhvdmVyZWQgc3F1YXJlcyBiYXNlZCBvbiB0aGUgc2hpcCBsZW5ndGhcbiAgICAgIGNvbnN0IGhvdmVyZWRTcXVhcmVzID0gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoXywgaSkgPT4ge1xuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIHJvdyBjb29yZGluYXRlIGJhc2VkIG9uIHZlcnRpY2FsIG9yIGhvcml6b250YWwgcGxhY2VtZW50XG4gICAgICAgIGNvbnN0IHJvdyA9IGlzVmVydGljYWwgPyBzdGFydFJvdyArIGkgOiBzdGFydFJvdztcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBjb2x1bW4gY29vcmRpbmF0ZSBiYXNlZCBvbiB2ZXJ0aWNhbCBvciBob3Jpem9udGFsIHBsYWNlbWVudFxuICAgICAgICBjb25zdCBjb2wgPSBpc1ZlcnRpY2FsID8gc3RhcnRDb2wgOiBzdGFydENvbCArIGk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW5pdGlhbFNxdWFyZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgIGAuZ2FtZWJvYXJkLmluaXRpYWwgW2RhdGEtY29vcmRpbmF0ZT1cIiR7RmFjdG9yeUhlbHBlcnMuY29udmVydFRvQWxwaGFudW1lcmljKFxuICAgICAgICAgICAgICBbcm93LCBjb2xdXG4gICAgICAgICAgICApfVwiXWBcbiAgICAgICAgICApLFxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIGhvdmVyZWRTcXVhcmVzLmZvckVhY2goKHsgaW5pdGlhbFNxdWFyZSB9KSA9PiB7XG4gICAgICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgaG92ZXJlZCBzcXVhcmVzXG4gICAgICAgIGlmIChpbml0aWFsU3F1YXJlKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGluaXRpYWwgc3F1YXJlIGV4aXN0c1xuICAgICAgICAgIGluaXRpYWxTcXVhcmUuY2xhc3NMaXN0LmFkZChcImhvdmVyZWRcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBnYW1lYm9hcmRNb3VzZUxlYXZlSGFuZGxlciA9ICgpID0+IHtcbiAgICBjb25zdCBob3ZlcmVkU3F1YXJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZ2FtZWJvYXJkIC5ob3ZlcmVkXCIpO1xuICAgIGhvdmVyZWRTcXVhcmVzLmZvckVhY2goKGhvdmVyZWRTcXVhcmUpID0+IHtcbiAgICAgIGhvdmVyZWRTcXVhcmUuY2xhc3NMaXN0LnJlbW92ZShcImhvdmVyZWRcIik7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgY29tcHV0ZXJBdHRhY2sgPSAoKSA9PiB7XG4gICAgaWYgKCFzaGlwUGxhY2VtZW50TW9kZSkge1xuICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IGNvbXB1dGVyLmF0dGFjayhcbiAgICAgICAgcGxheWVyR2FtZWJvYXJkLFxuICAgICAgICBjb21wdXRlci5sYXN0SGl0Q29vcmRpbmF0ZSxcbiAgICAgICAgY29tcHV0ZXIuY3VycmVudERpcmVjdGlvblxuICAgICAgKTtcbiAgICAgIC8vIFJlY2VpdmUgdGhlIGF0dGFjayBvbiB0aGUgcGxheWVyJ3MgZ2FtZWJvYXJkIGFuZCBnZXQgdGhlIGF0dGFja2VkIHNoaXAgKGlmIGFueSlcbiAgICAgIGNvbnN0IGF0dGFja2VkU2hpcCA9IHBsYXllckdhbWVib2FyZC5yZWNlaXZlQXR0YWNrKGNvb3JkaW5hdGUpO1xuXG4gICAgICBjb25zb2xlLmxvZyhgY29tcHV0ZXJBdHRhY2soKSBhdDogJHtjb29yZGluYXRlfWApO1xuXG4gICAgICBjb25zdCBzcXVhcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBgLmdhbWVib2FyZC5wbGF5ZXIgW2RhdGEtY29vcmRpbmF0ZT1cIiR7Y29vcmRpbmF0ZX1cIl1gXG4gICAgICApOyAvLyBHZXQgdGhlIGNvcnJlc3BvbmRpbmcgc3F1YXJlIGVsZW1lbnQgb24gdGhlIHBsYXllcidzIGdhbWVib2FyZFxuXG4gICAgICBpZiAoYXR0YWNrZWRTaGlwKSB7XG4gICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xuICAgICAgICAvLyBJZiB0aGVyZSB3YXMgYSBoaXQsIHVwZGF0ZSB0aGUgbGFzdEhpdENvb3JkaW5hdGUgYW5kIGN1cnJlbnREaXJlY3Rpb25cbiAgICAgICAgY29tcHV0ZXIubGFzdEhpdENvb3JkaW5hdGUgPSBjb29yZGluYXRlO1xuICAgICAgICAvLyBUbyBrZWVwIHRoZSBjb21wdXRlcidzIGF0dGFjayBjb25zaXN0ZW50LCBzZXQgdGhlIGN1cnJlbnREaXJlY3Rpb24gaW5pdGlhbGx5IHRvIFwidXBcIlxuICAgICAgICBpZiAoY29tcHV0ZXIuY3VycmVudERpcmVjdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICAgIGNvbXB1dGVyLmN1cnJlbnREaXJlY3Rpb24gPSBcInVwXCI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIWF0dGFja2VkU2hpcCAmJiBjb21wdXRlci5sYXN0SGl0Q29vcmRpbmF0ZSkge1xuICAgICAgICBzcXVhcmUuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gICAgICB9IGVsc2UgaWYgKCFhdHRhY2tlZFNoaXAgJiYgIWNvbXB1dGVyLmxhc3RIaXRDb29yZGluYXRlKSB7XG4gICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcbiAgICAgICAgLy8gSWYgdGhlcmUgd2FzIGEgbWlzcywgcmVzZXQgdGhlIGxhc3RIaXRDb29yZGluYXRlIGFuZCBjdXJyZW50RGlyZWN0aW9uXG4gICAgICAgIGNvbXB1dGVyLmxhc3RIaXRDb29yZGluYXRlID0gbnVsbDtcbiAgICAgICAgY29tcHV0ZXIuY3VycmVudERpcmVjdGlvbiA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAocGxheWVyR2FtZWJvYXJkLmFsbFNoaXBzU3VuaygpKSB7XG4gICAgICAgIHdpbm5lciA9IFwiVGhlIGNvbXB1dGVyXCI7XG4gICAgICAgIFJlbmRlcmVyLnNldFdpbm5lckhlYWRpbmcod2lubmVyKTtcbiAgICAgICAgQXBwSGVscGVycy50b2dnbGVNb2RhbChcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmVuZGdhbWVcIiksXG4gICAgICAgICAgXCJzaG93XCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcGxheWVyQXR0YWNrID0gKGUpID0+IHtcbiAgICBpZiAoIXNoaXBQbGFjZW1lbnRNb2RlKSB7XG4gICAgICBjb25zdCBzcXVhcmUgPSBlLnRhcmdldDsgLy8gR2V0IHRoZSBjbGlja2VkIHNxdWFyZSBlbGVtZW50XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBzcXVhcmUuZGF0YXNldC5jb29yZGluYXRlO1xuICAgICAgLy8gQ29udmVydCB0aGUgcm93IGFuZCBjb2x1bW4gaW5kaWNlcyB0byBhbiBhbHBoYW51bWVyaWMgY29vcmRpbmF0ZVxuXG4gICAgICAvLyBDaGVjayBpZiB0aGUgY29vcmRpbmF0ZSBoYXMgbm90IGJlZW4gcHJldmlvdXNseSBhdHRhY2tlZFxuICAgICAgaWYgKCFjb21wdXRlckdhbWVib2FyZC5nZXRBdHRhY2tlZENvb3JkaW5hdGVzKCkuaW5jbHVkZXMoY29vcmRpbmF0ZSkpIHtcbiAgICAgICAgLy8gUmVjZWl2ZSB0aGUgYXR0YWNrIG9uIHRoZSBjb21wdXRlcidzIGdhbWVib2FyZCBhbmQgZ2V0IHRoZSBhdHRhY2tlZCBzaGlwIChpZiBhbnkpXG4gICAgICAgIGNvbnN0IGF0dGFja2VkU2hpcCA9IGNvbXB1dGVyR2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZSk7XG5cbiAgICAgICAgaWYgKGF0dGFja2VkU2hpcCkge1xuICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNxdWFyZS5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb21wdXRlckdhbWVib2FyZC5hbGxTaGlwc1N1bmsoKSkge1xuICAgICAgICAgIHdpbm5lciA9IFwiWW91XCI7XG4gICAgICAgICAgUmVuZGVyZXIuc2V0V2lubmVySGVhZGluZyh3aW5uZXIpO1xuICAgICAgICAgIEFwcEhlbHBlcnMudG9nZ2xlTW9kYWwoXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmVuZGdhbWVcIiksXG4gICAgICAgICAgICBcInNob3dcIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb21wdXRlckF0dGFjaygpOyAvLyBQZXJmb3JtIHRoZSBjb21wdXRlcidzIGF0dGFja1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCByb3RhdGVTaGlwcyA9ICgpID0+IHtcbiAgICBpc1ZlcnRpY2FsID0gIWlzVmVydGljYWw7XG4gIH07XG5cbiAgY29uc3QgZXZlbnRMaXN0ZW5lcnMgPSBbXG4gICAgeyBldmVudFR5cGU6IFwibW91c2VvdmVyXCIsIGhhbmRsZXI6IGdhbWVib2FyZEhvdmVySGFuZGxlciB9LFxuICAgIHsgZXZlbnRUeXBlOiBcIm1vdXNlbGVhdmVcIiwgaGFuZGxlcjogZ2FtZWJvYXJkTW91c2VMZWF2ZUhhbmRsZXIgfSxcbiAgICB7IGV2ZW50VHlwZTogXCJjbGlja1wiLCBoYW5kbGVyOiBzaGlwUGxhY2VtZW50SGFuZGxlciB9LFxuICBdO1xuXG4gIGNvbnN0IHJlc2V0R2FtZSA9ICgpID0+IHtcbiAgICAvLyBSZXNldCBnYW1lLXJlbGF0ZWQgdmFyaWFibGVzXG4gICAgY3VycmVudFNoaXBJbmRleCA9IDA7XG4gICAgc2hpcFBsYWNlbWVudE1vZGUgPSB0cnVlO1xuICAgIGlzVmVydGljYWwgPSBmYWxzZTtcbiAgICB3aW5uZXIgPSBudWxsO1xuXG4gICAgLy8gUmVzZXQgZ2FtZWJvYXJkIG9iamVjdHNcbiAgICBwbGF5ZXJHYW1lYm9hcmQucmVzZXQoKTtcbiAgICBjb21wdXRlckdhbWVib2FyZC5yZXNldCgpO1xuXG4gICAgLy8gQ2xlYXIgY29tcHV0ZXJzIGF0dGFja2VkQ29vcmRpbmF0ZXMgc2V0XG4gICAgY29tcHV0ZXIuY2xlYXJTZXQoKTtcblxuICAgIC8vIFJlbW92ZSBoaXQgYW5kIG1pc3MgY2xhc3NlcyBmcm9tIGFsbCBzcXVhcmVzXG4gICAgUmVuZGVyZXIuY2xlYXJHYW1lYm9hcmQoXCIuZ2FtZWJvYXJkLmluaXRpYWxcIik7XG4gICAgUmVuZGVyZXIuY2xlYXJHYW1lYm9hcmQoXCIuZ2FtZWJvYXJkLnBsYXllclwiKTtcbiAgICBSZW5kZXJlci5jbGVhckdhbWVib2FyZChcIi5nYW1lYm9hcmQuY29tcHV0ZXJcIik7XG5cbiAgICAvLyBSZXNldCBzaGlwVHlwZXNcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNoaXAtdHlwZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICBBcHBIZWxwZXJzLnNoaXBUeXBlc1swXS50eXBlO1xuICB9O1xuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgQXBwSGVscGVycy50b2dnbGVNb2RhbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLmVuZGdhbWVcIiksIFwiaGlkZVwiKTtcbiAgICBSZW5kZXJlci5yZW5kZXJHYW1lYm9hcmQoXCIuZ2FtZWJvYXJkLmluaXRpYWxcIik7XG4gICAgUmVuZGVyZXIucmVuZGVyR2FtZWJvYXJkKFwiLmdhbWVib2FyZC5wbGF5ZXJcIik7XG4gICAgUmVuZGVyZXIucmVuZGVyR2FtZWJvYXJkKFwiLmdhbWVib2FyZC5jb21wdXRlclwiKTtcbiAgICBSZW5kZXJlci5hdHRhY2hFdmVudExpc3RlbmVycyhcIi5nYW1lYm9hcmQuaW5pdGlhbFwiLCBldmVudExpc3RlbmVycyk7XG5cbiAgICBjb25zdCBjb21wdXRlclNxdWFyZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxuICAgICAgXCIuZ2FtZWJvYXJkLmNvbXB1dGVyIC5zcXVhcmVcIlxuICAgICk7XG4gICAgY29tcHV0ZXJTcXVhcmVzLmZvckVhY2goKHNxdWFyZSkgPT4ge1xuICAgICAgc3F1YXJlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBwbGF5ZXJBdHRhY2spO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgcm90YXRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNyb3RhdGVCdG5cIik7XG4gICAgcm90YXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByb3RhdGVTaGlwcyk7XG5cbiAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ld0dhbWVcIik7XG4gICAgcGxheUFnYWluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICByZXNldEdhbWUoKTtcbiAgICAgIEFwcEhlbHBlcnMudG9nZ2xlTW9kYWwoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC5lbmRnYW1lXCIpLCBcImhpZGVcIik7XG4gICAgICBBcHBIZWxwZXJzLnRvZ2dsZU1vZGFsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwuaW5pdGlhbFwiKSwgXCJzaG93XCIpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdCxcbiAgfTtcbn0pKCk7XG5cbkNvbnRyb2xsZXIuaW5pdCgpO1xuIiwiaW1wb3J0IHsgRmFjdG9yeUhlbHBlcnMgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgY29uc3QgU2hpcEZhY3RvcnkgPSAobGVuZ3RoKSA9PiB7XG4gIGxldCBoaXRzID0gMDtcblxuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaGl0cyArPSAxO1xuICB9O1xuXG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IGhpdHMgPj0gbGVuZ3RoOyAvLyBSZXR1cm4gdHJ1ZSBpZiBoaXRzIGlzIGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbiBsZW5ndGhcblxuICByZXR1cm4ge1xuICAgIGxlbmd0aCxcbiAgICBoaXQsXG4gICAgaXNTdW5rLFxuICAgIGdldCBoaXRzKCkge1xuICAgICAgLy8gR2V0dGVyIGZ1bmN0aW9uIGZvciBoaXRzLiBVc2luZyBmdW5jdGlvbiBkZWNsYXJhdGlvbiB0byBlbnN1cmUgaXQgaGFzIGFjY2VzcyB0byB0aGVcbiAgICAgIC8vIGBoaXRzYCB2YXJpYWJsZSBkeW5hbWljYWxseSwgc2luY2UgZnVuY3Rpb24gZGVjbGFyYXRpb25zIGFyZSBob2lzdGVkIGFuZCBjYW4gYmUgdXNlZFxuICAgICAgLy8gYmVmb3JlIHRoZXkgYXJlIGRlZmluZWQuIFRoaXMgYWxsb3dzIGFjY2Vzc2luZyB0aGUgY3VycmVudCB2YWx1ZSBvZiBgaGl0c2AgZXZlbiBiZWZvcmVcbiAgICAgIC8vIGNhbGxpbmcgdGhlIGBoaXRgIGZ1bmN0aW9uXG4gICAgICByZXR1cm4gaGl0cztcbiAgICB9LFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IEdhbWVib2FyZEZhY3RvcnkgPSAoKSA9PiB7XG4gIGNvbnN0IGdyaWRTaXplID0gMTA7XG4gIGNvbnN0IGdyaWQgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBncmlkU2l6ZSB9LCAoKSA9PlxuICAgIEFycmF5KGdyaWRTaXplKS5maWxsKG51bGwpXG4gICk7XG5cbiAgbGV0IGF0dGFja2VkQ29vcmRpbmF0ZXMgPSBbXTtcbiAgbGV0IG1pc3NlZEF0dGFja3MgPSBbXTtcblxuICBjb25zdCBnZXRHcmlkID0gKCkgPT4gZ3JpZDtcblxuICBjb25zdCBwbGFjZVNoaXAgPSAoc2hpcCwgY29vcmRpbmF0ZXMpID0+IHtcbiAgICAvLyBDaGVjayBpZiBhbGwgY29vcmRpbmF0ZXMgYXJlIHdpdGhpbiB0aGUgYm91bmRhcmllcyBvZiB0aGUgZ3JpZFxuICAgIGNvbnN0IHdpdGhpbkJvdW5kYXJpZXMgPSBjb29yZGluYXRlcy5ldmVyeShcbiAgICAgIChbcm93LCBjb2xdKSA9PiByb3cgPj0gMCAmJiByb3cgPCBncmlkU2l6ZSAmJiBjb2wgPj0gMCAmJiBjb2wgPCBncmlkU2l6ZVxuICAgICk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSBhcmUgYW55IGNvbmZsaWN0cyB3aXRoIGV4aXN0aW5nIHNoaXAgcGxhY2VtZW50cyBvbiB0aGUgZ3JpZFxuICAgIGNvbnN0IGNvbmZsaWN0cyA9IGNvb3JkaW5hdGVzLnNvbWUoKFtyb3csIGNvbF0pID0+IGdyaWRbcm93XVtjb2xdICE9PSBudWxsKTtcblxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgYWRqYWNlbnQgY29uZmxpY3RzIHdpdGggZXhpc3Rpbmcgc2hpcCBwbGFjZW1lbnRzIG9uIHRoZSBncmlkXG4gICAgY29uc3QgYWRqYWNlbnRDb25mbGljdHMgPSBjb29yZGluYXRlcy5zb21lKChbcm93LCBjb2xdKSA9PiB7XG4gICAgICAvLyBEZWZpbmUgdGhlIGFkamFjZW50IGNvb3JkaW5hdGVzIGFyb3VuZCB0aGUgY3VycmVudCBjb29yZGluYXRlXG4gICAgICBjb25zdCBhZGphY2VudENvb3JkaW5hdGVzID0gW1xuICAgICAgICBbcm93IC0gMSwgY29sXSwgLy8gVXBcbiAgICAgICAgW3JvdyArIDEsIGNvbF0sIC8vIERvd25cbiAgICAgICAgW3JvdywgY29sIC0gMV0sIC8vIExlZnRcbiAgICAgICAgW3JvdywgY29sICsgMV0sIC8vIFJpZ2h0XG4gICAgICAgIFtyb3cgLSAxLCBjb2wgLSAxXSwgLy8gRGlhZ29uYWwgVXAtTGVmdFxuICAgICAgICBbcm93IC0gMSwgY29sICsgMV0sIC8vIERpYWdvbmFsIFVwLVJpZ2h0XG4gICAgICAgIFtyb3cgKyAxLCBjb2wgLSAxXSwgLy8gRGlhZ29uYWwgRG93bi1MZWZ0XG4gICAgICAgIFtyb3cgKyAxLCBjb2wgKyAxXSwgLy8gRGlhZ29uYWwgRG93bi1SaWdodFxuICAgICAgXTtcblxuICAgICAgLy8gQ2hlY2sgaWYgYW55IGFkamFjZW50IGNvb3JkaW5hdGUgaGFzIGEgc2hpcCBwbGFjZWQgb24gaXRcbiAgICAgIHJldHVybiBhZGphY2VudENvb3JkaW5hdGVzLnNvbWUoXG4gICAgICAgIChbYWRqUm93LCBhZGpDb2xdKSA9PlxuICAgICAgICAgIGFkalJvdyA+PSAwICYmXG4gICAgICAgICAgYWRqUm93IDwgZ3JpZFNpemUgJiZcbiAgICAgICAgICBhZGpDb2wgPj0gMCAmJlxuICAgICAgICAgIGFkakNvbCA8IGdyaWRTaXplICYmXG4gICAgICAgICAgZ3JpZFthZGpSb3ddPy5bYWRqQ29sXSAhPT0gbnVsbFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIC8vIElmIHRoZSBzaGlwIHBsYWNlbWVudCBpcyB3aXRoaW4gZ3JpZCBib3VuZGFyaWVzLCBoYXMgbm8gY29uZmxpY3RzLCBhbmQgbm8gYWRqYWNlbnQgY29uZmxpY3RzLi4uXG4gICAgaWYgKHdpdGhpbkJvdW5kYXJpZXMgJiYgIWNvbmZsaWN0cyAmJiAhYWRqYWNlbnRDb25mbGljdHMpIHtcbiAgICAgIC8vIENyZWF0ZSBhbiBvYmplY3QgY29udGFpbmluZyBzaGlwIGluZm9ybWF0aW9uIGFuZCBjb29yZGluYXRlc1xuICAgICAgY29uc3Qgc2hpcEluZm8gPSB7XG4gICAgICAgIHNoaXAsXG4gICAgICAgIGNvb3JkaW5hdGVzLFxuICAgICAgfTtcblxuICAgICAgLy8gUGxhY2UgdGhlIHNoaXAgb24gdGhlIGdyaWQgYnkgdXBkYXRpbmcgdGhlIGNvcnJlc3BvbmRpbmcgY2VsbHNcbiAgICAgIHNoaXBJbmZvLmNvb3JkaW5hdGVzLmZvckVhY2goKFtyb3csIGNvbF0pID0+IHtcbiAgICAgICAgZ3JpZFtyb3ddW2NvbF0gPSBzaGlwSW5mbztcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdHJ1ZTsgLy8gU2hpcCBwbGFjZW1lbnQgc3VjY2Vzc2Z1bFxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTsgLy8gT3RoZXJ3aXNlLCBzaGlwIHBsYWNlbWVudCBmYWlsZWRcbiAgfTtcblxuICBjb25zdCBnZXRTaGlwcyA9ICgpID0+IHtcbiAgICBjb25zdCBzaGlwcyA9IFtdO1xuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGVhY2ggY2VsbCBvZiB0aGUgZ3JpZFxuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IGdyaWRTaXplOyByb3cgKz0gMSkge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgZ3JpZFNpemU7IGNvbCArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBncmlkW3Jvd11bY29sXTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNlbGwgY29udGFpbnMgYSBzaGlwIGFuZCBpdCdzIG5vdCBhbHJlYWR5IGluY2x1ZGVkIGluIHRoZSBzaGlwcyBhcnJheVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY2VsbCAhPT0gbnVsbCAmJlxuICAgICAgICAgIGNlbGwuc2hpcCAmJlxuICAgICAgICAgICFzaGlwcy5pbmNsdWRlcyhjZWxsLnNoaXApICYmXG4gICAgICAgICAgIWNlbGwuc2hpcC5pc1N1bmsoKVxuICAgICAgICApIHtcbiAgICAgICAgICAvLyBBZGQgdGhlIHNoaXAgdG8gdGhlIHNoaXBzIGFycmF5XG4gICAgICAgICAgc2hpcHMucHVzaChjZWxsLnNoaXApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNoaXBzO1xuICB9O1xuXG4gIGNvbnN0IGdldEFsbFNoaXBzID0gKCkgPT4ge1xuICAgIGNvbnN0IHNoaXBzID0gW107XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCBjZWxsIG9mIHRoZSBncmlkXG4gICAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgZ3JpZFNpemU7IHJvdyArPSAxKSB7XG4gICAgICBmb3IgKGxldCBjb2wgPSAwOyBjb2wgPCBncmlkU2l6ZTsgY29sICs9IDEpIHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdyaWRbcm93XVtjb2xdO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY2VsbCBjb250YWlucyBhIHNoaXAgYW5kIGl0J3Mgbm90IGFscmVhZHkgaW5jbHVkZWQgaW4gdGhlIHNoaXBzIGFycmF5XG4gICAgICAgIGlmIChjZWxsICE9PSBudWxsICYmIGNlbGwuc2hpcCAmJiAhc2hpcHMuaW5jbHVkZXMoY2VsbC5zaGlwKSkge1xuICAgICAgICAgIC8vIEFkZCB0aGUgc2hpcCB0byB0aGUgc2hpcHMgYXJyYXlcbiAgICAgICAgICBzaGlwcy5wdXNoKGNlbGwuc2hpcCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2hpcHM7XG4gIH07XG5cbiAgY29uc3QgZ2V0U2hpcENvb3JkaW5hdGVzID0gKHNoaXApID0+IHtcbiAgICBjb25zdCBjb29yZGluYXRlcyA9IFtdO1xuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGVhY2ggY2VsbCBvZiB0aGUgZ3JpZFxuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IGdyaWRTaXplOyByb3cgKz0gMSkge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgZ3JpZFNpemU7IGNvbCArPSAxKSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBncmlkW3Jvd11bY29sXTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNlbGwgZXhpc3RzIGFuZCBjb250YWlucyB0aGUgc3BlY2lmaWVkIHNoaXBcbiAgICAgICAgaWYgKGNlbGwgJiYgY2VsbC5zaGlwID09PSBzaGlwKSB7XG4gICAgICAgICAgLy8gQWRkIHRvIGNvb3JkaW5hdGVzIGFycmF5XG4gICAgICAgICAgY29vcmRpbmF0ZXMucHVzaChbcm93LCBjb2xdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb29yZGluYXRlcztcbiAgfTtcblxuICBjb25zdCByZWNlaXZlQXR0YWNrID0gKGNvb3JkaW5hdGUpID0+IHtcbiAgICBjb25zdCBbY29sdW1uTGV0dGVyLCByb3dOdW1iZXJdID0gY29vcmRpbmF0ZTtcbiAgICBjb25zdCByb3cgPSBwYXJzZUludChyb3dOdW1iZXIsIDEwKTtcbiAgICBjb25zdCBjb2wgPSBjb2x1bW5MZXR0ZXIuY2hhckNvZGVBdCgwKSAtIDY1O1xuICAgIGNvbnN0IGNlbGwgPSBncmlkW3Jvd11bY29sXTtcblxuICAgIGlmIChjZWxsICE9PSBudWxsKSB7XG4gICAgICAvLyBTaGlwIGF0IGNvb3JkaW5hdGUsIGl0J3MgYSBoaXRcbiAgICAgIGNvbnN0IHsgc2hpcCB9ID0gY2VsbDtcbiAgICAgIHNoaXAuaGl0KCk7IC8vIEluY3JlbWVudCBoaXQgY291bnQgb2YgdGhlIHNoaXBcbiAgICAgIGF0dGFja2VkQ29vcmRpbmF0ZXMucHVzaChjb29yZGluYXRlKTtcbiAgICAgIHJldHVybiBzaGlwOyAvLyBSZXR1cm4gdGhlIHNoaXAgb2JqZWN0IHdoZW4gaXQgaXMgaGl0XG4gICAgfVxuICAgIC8vIE5vIHNoaXAgYXQgY29vcmRpbmF0ZSwgaXQncyBhIG1pc3NcbiAgICBtaXNzZWRBdHRhY2tzLnB1c2goY29vcmRpbmF0ZSk7XG4gICAgYXR0YWNrZWRDb29yZGluYXRlcy5wdXNoKGNvb3JkaW5hdGUpO1xuICAgIHJldHVybiBudWxsOyAvLyBSZXR1cm4gbnVsbCB3aGVuIGl0J3MgYSBtaXNzXG4gIH07XG5cbiAgY29uc3QgYWxsU2hpcHNTdW5rID0gKCkgPT4ge1xuICAgIGNvbnN0IHNoaXBzID0gZ2V0U2hpcHMoKTsgLy8gUmV0cmlldmUgYWxsIHRoZSBzaGlwcyBvbiB0aGUgZ2FtZWJvYXJkXG5cbiAgICAvLyBDaGVjayBpZiBhbGwgc2hpcHMgYXJlIHN1bmssIHJldHVybiB0cnVlIGlmIHllcywgYW5kIHJldHVybiBmYWxzZSBpZiBub1xuICAgIGNvbnN0IHJlc3VsdCA9IHNoaXBzLmV2ZXJ5KChzaGlwKSA9PiBzaGlwLmlzU3VuaygpKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgY29uc3QgcmVzZXQgPSAoKSA9PiB7XG4gICAgLy8gQ2xlYXIgdGhlIGdyaWQgYnkgc2V0dGluZyBhbGwgY2VsbHMgdG8gbnVsbFxuICAgIGdyaWQuZm9yRWFjaCgocm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgcm93LmZvckVhY2goKF8sIGNvbEluZGV4KSA9PiB7XG4gICAgICAgIGdyaWRbcm93SW5kZXhdW2NvbEluZGV4XSA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFJlYXNzaWduIGVtcHR5IGFycmF5cyB0byBjbGVhciB0aGUgY29udGVudHMgb2YgYXR0YWNrZWRDb29yZGluYXRlcyBhbmQgbWlzc2VkQXR0YWNrc1xuICAgIGF0dGFja2VkQ29vcmRpbmF0ZXMgPSBbXTtcbiAgICBtaXNzZWRBdHRhY2tzID0gW107XG4gIH07XG5cbiAgY29uc3QgZ2V0TWlzc2VkQXR0YWNrcyA9ICgpID0+IG1pc3NlZEF0dGFja3M7XG5cbiAgY29uc3QgZ2V0QXR0YWNrZWRDb29yZGluYXRlcyA9ICgpID0+IGF0dGFja2VkQ29vcmRpbmF0ZXM7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRHcmlkLFxuICAgIHBsYWNlU2hpcCxcbiAgICBnZXRTaGlwcyxcbiAgICBnZXRBbGxTaGlwcyxcbiAgICBnZXRTaGlwQ29vcmRpbmF0ZXMsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBnZXRNaXNzZWRBdHRhY2tzLFxuICAgIGdldEF0dGFja2VkQ29vcmRpbmF0ZXMsXG4gICAgYWxsU2hpcHNTdW5rLFxuICAgIHJlc2V0LFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IFBsYXllckZhY3RvcnkgPSAobmFtZSwgY3VycmVudERpcmVjdGlvbiwgbGFzdEhpdENvb3JkaW5hdGUpID0+IHtcbiAgY29uc3QgYXR0YWNrZWRDb29yZGluYXRlcyA9IG5ldyBTZXQoKTsgLy8gU2V0IHRvIGtlZXAgdHJhY2sgb2YgYXR0YWNrZWQgY29vcmRpbmF0ZXNcblxuICBjb25zdCBnZXROZXh0Q29vcmRpbmF0ZUluRGlyZWN0aW9uID0gKGNvb3JkaW5hdGUsIGRpcmVjdGlvbikgPT4ge1xuICAgIGNvbnN0IFtjb2xMZXR0ZXIsIHJvd051bWJlcl0gPSBjb29yZGluYXRlO1xuICAgIGNvbnN0IHJvdyA9IHBhcnNlSW50KHJvd051bWJlciwgMTApO1xuICAgIGNvbnN0IGNvbCA9IGNvbExldHRlci5jaGFyQ29kZUF0KDApIC0gNjU7XG5cbiAgICBsZXQgbmV4dFJvdyA9IHJvdztcbiAgICBsZXQgbmV4dENvbCA9IGNvbDtcblxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XG4gICAgICBjYXNlIFwidXBcIjpcbiAgICAgICAgbmV4dFJvdyAtPSAxO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJkb3duXCI6XG4gICAgICAgIG5leHRSb3cgKz0gMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibGVmdFwiOlxuICAgICAgICBuZXh0Q29sIC09IDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInJpZ2h0XCI6XG4gICAgICAgIG5leHRDb2wgKz0gMTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gRmFjdG9yeUhlbHBlcnMuY29udmVydFRvQWxwaGFudW1lcmljKFtuZXh0Um93LCBuZXh0Q29sXSk7XG4gIH07XG5cbiAgY29uc3QgZ2V0TmV4dERpcmVjdGlvbnMgPSAoKSA9PiB7XG4gICAgY29uc3QgZGlyZWN0aW9ucyA9IFtcInVwXCIsIFwiZG93blwiLCBcImxlZnRcIiwgXCJyaWdodFwiXTtcbiAgICBpZiAoIWN1cnJlbnREaXJlY3Rpb24pIHtcbiAgICAgIC8vIElmIGN1cnJlbnREaXJlY3Rpb24gaXMgbm90IHNldCwgc2h1ZmZsZSB0aGUgZGlyZWN0aW9ucyB0byB0cnkgdGhlbSBpbiByYW5kb20gb3JkZXJcbiAgICAgIGZvciAobGV0IGkgPSBkaXJlY3Rpb25zLmxlbmd0aCAtIDE7IGkgPiAwOyBpIC09IDEpIHtcbiAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xuICAgICAgICBbZGlyZWN0aW9uc1tpXSwgZGlyZWN0aW9uc1tqXV0gPSBbZGlyZWN0aW9uc1tqXSwgZGlyZWN0aW9uc1tpXV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElmIGN1cnJlbnREaXJlY3Rpb24gaXMgc2V0LCBtb3ZlIGl0IHRvIHRoZSBlbmQgb2YgdGhlIGxpc3QsIHNvIGl0IHdpbGwgdHJ5IG90aGVyIGRpcmVjdGlvbnMgZmlyc3RcbiAgICAgIGNvbnN0IGluZGV4ID0gZGlyZWN0aW9ucy5pbmRleE9mKGN1cnJlbnREaXJlY3Rpb24pO1xuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICBkaXJlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIGRpcmVjdGlvbnMucHVzaChjdXJyZW50RGlyZWN0aW9uKTtcbiAgICAgICAgY29uc29sZS5sb2coY3VycmVudERpcmVjdGlvbik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkaXJlY3Rpb25zO1xuICB9O1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3dcbiAgY29uc3QgYXR0YWNrID0gKGVuZW15R2FtZWJvYXJkLCBsYXN0SGl0Q29vcmRpbmF0ZSwgY3VycmVudERpcmVjdGlvbikgPT4ge1xuICAgIGNvbnN0IGdyaWRTaXplID0gZW5lbXlHYW1lYm9hcmQuZ2V0R3JpZCgpLmxlbmd0aDtcbiAgICBjb25zdCB2YWxpZENvb3JkaW5hdGVzID0gRmFjdG9yeUhlbHBlcnMuZ2V0QWxsVmFsaWRDb29yZGluYXRlcyhncmlkU2l6ZSk7XG5cbiAgICBsZXQgY29vcmRpbmF0ZSA9IFwiXCI7XG5cbiAgICBjb25zb2xlLmxvZyhgbGFzdEhpdENvb3JkaW5hdGU6ICR7bGFzdEhpdENvb3JkaW5hdGV9YCk7XG4gICAgY29uc29sZS5sb2coYGN1cnJlbnREaXJlY3Rpb246ICR7Y3VycmVudERpcmVjdGlvbn1gKTtcblxuICAgIGlmIChsYXN0SGl0Q29vcmRpbmF0ZSAmJiBjdXJyZW50RGlyZWN0aW9uKSB7XG4gICAgICAvLyBHZXQgdGhlIG5leHQgZGlyZWN0aW9ucyB0byB0cnlcbiAgICAgIGNvbnN0IGRpcmVjdGlvbnNUb1RyeSA9IGdldE5leHREaXJlY3Rpb25zKCk7XG5cbiAgICAgIC8vIFRyeSBlYWNoIGRpcmVjdGlvbiB1bnRpbCBhIHZhbGlkIGNvb3JkaW5hdGUgaXMgZm91bmRcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgZm9yIChjb25zdCBkaXJlY3Rpb24gb2YgZGlyZWN0aW9uc1RvVHJ5KSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXROZXh0Q29vcmRpbmF0ZUluRGlyZWN0aW9uKGxhc3RIaXRDb29yZGluYXRlLCBkaXJlY3Rpb24pO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgbmV4dCBjb29yZGluYXRlIGluIHRoZSBjdXJyZW50IGRpcmVjdGlvbiBpcyBhIHZhbGlkLCB1bmF0dGFja2VkIGNvb3JkaW5hdGVcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHZhbGlkQ29vcmRpbmF0ZXMuaW5jbHVkZXMoY29vcmRpbmF0ZSkgJiZcbiAgICAgICAgICAhYXR0YWNrZWRDb29yZGluYXRlcy5oYXMoY29vcmRpbmF0ZSkgJiZcbiAgICAgICAgICAhZW5lbXlHYW1lYm9hcmQuZ2V0QXR0YWNrZWRDb29yZGluYXRlcygpLmluY2x1ZGVzKGNvb3JkaW5hdGUpXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIEFkZCB0aGUgYXR0YWNrZWQgY29vcmRpbmF0ZSB0byB0aGUgcGxheWVyJ3Mgc2V0IG9mIGF0dGFja2VkIGNvb3JkaW5hdGVzXG4gICAgICAgICAgYXR0YWNrZWRDb29yZGluYXRlcy5hZGQoY29vcmRpbmF0ZSk7XG4gICAgICAgICAgLy8gVXBkYXRlIGxhc3RIaXRDb29yZGluYXRlIGFuZCBjdXJyZW50RGlyZWN0aW9uXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgbGFzdEhpdENvb3JkaW5hdGUgPSBjb29yZGluYXRlO1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgIGN1cnJlbnREaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBubyB2YWxpZCBuZXh0IGNvb3JkaW5hdGUgaW4gdGhlIGN1cnJlbnQgZGlyZWN0aW9uLCBvciBpZiB0aGUgbGFzdEhpdENvb3JkaW5hdGUgb3IgY3VycmVudERpcmVjdGlvbiBpcyBub3Qgc2V0LFxuICAgIC8vIGF0dGFjayByYW5kb21seSBsaWtlIGJlZm9yZVxuICAgIGRvIHtcbiAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdmFsaWRDb29yZGluYXRlcy5sZW5ndGgpO1xuICAgICAgY29vcmRpbmF0ZSA9IHZhbGlkQ29vcmRpbmF0ZXNbcmFuZG9tSW5kZXhdO1xuICAgIH0gd2hpbGUgKFxuICAgICAgYXR0YWNrZWRDb29yZGluYXRlcy5oYXMoY29vcmRpbmF0ZSkgfHxcbiAgICAgIGVuZW15R2FtZWJvYXJkLmdldEF0dGFja2VkQ29vcmRpbmF0ZXMoKS5pbmNsdWRlcyhjb29yZGluYXRlKVxuICAgICk7XG5cbiAgICAvLyBBZGQgdGhlIGF0dGFja2VkIGNvb3JkaW5hdGUgdG8gdGhlIHBsYXllcidzIHNldCBvZiBhdHRhY2tlZCBjb29yZGluYXRlc1xuICAgIGF0dGFja2VkQ29vcmRpbmF0ZXMuYWRkKGNvb3JkaW5hdGUpO1xuXG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG4gIH07XG5cbiAgY29uc3QgZ2V0QXR0YWNrZWRTZXQgPSAoKSA9PiBhdHRhY2tlZENvb3JkaW5hdGVzO1xuXG4gIGNvbnN0IGNsZWFyU2V0ID0gKCkgPT4ge1xuICAgIGF0dGFja2VkQ29vcmRpbmF0ZXMuY2xlYXIoKTtcbiAgICAvLyBsYXN0SGl0Q29vcmRpbmF0ZSA9IG51bGw7XG4gICAgLy8gY3VycmVudERpcmVjdGlvbiA9IG51bGw7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBuYW1lLFxuICAgIGxhc3RIaXRDb29yZGluYXRlLFxuICAgIGN1cnJlbnREaXJlY3Rpb24sXG4gICAgYXR0YWNrLFxuICAgIGdldEF0dGFja2VkU2V0LFxuICAgIGNsZWFyU2V0LFxuICB9O1xufTtcbiIsImV4cG9ydCBjb25zdCBGYWN0b3J5SGVscGVycyA9ICgoKSA9PiB7XG4gIGNvbnN0IHZhbGlkQ29vcmRpbmF0ZXMgPSBbXTtcblxuICBjb25zdCBjb252ZXJ0VG9JbmRpY2VzID0gKGNvb3JkaW5hdGUpID0+IHtcbiAgICBjb25zdCBjb2x1bW4gPSBjb29yZGluYXRlLmNoYXJDb2RlQXQoMCkgLSA2NTsgLy8gQ29udmVydCBjb2x1bW4gbGV0dGVyIHRvIGluZGV4XG4gICAgY29uc3Qgcm93ID0gcGFyc2VJbnQoY29vcmRpbmF0ZS5zbGljZSgxKSwgMTApOyAvLyBDb252ZXJ0IHJvdyBudW1iZXIgdG8gaW5kZXggd2l0aCByYWRpeCAxMFxuICAgIHJldHVybiBbcm93LCBjb2x1bW5dO1xuICB9O1xuXG4gIGNvbnN0IGNvbnZlcnRUb0FscGhhbnVtZXJpYyA9IChbcm93LCBjb2x1bW5dKSA9PiB7XG4gICAgY29uc3QgY29vcmRpbmF0ZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29sdW1uICsgNjUpOyAvLyBDb252ZXJ0IGNvbHVtbiBpbmRleCB0byBsZXR0ZXJcbiAgICByZXR1cm4gY29vcmRpbmF0ZSArIHJvdzsgLy8gQ29udmVydCByb3cgaW5kZXggdG8gbnVtYmVyXG4gIH07XG5cbiAgY29uc3QgZ2V0QWxsVmFsaWRDb29yZGluYXRlcyA9IChncmlkU2l6ZSkgPT4ge1xuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IGdyaWRTaXplOyByb3cgKz0gMSkge1xuICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgZ3JpZFNpemU7IGNvbCArPSAxKSB7XG4gICAgICAgIGNvbnN0IGFscGhhbnVtZXJpY0Nvb3JkaW5hdGUgPSBjb252ZXJ0VG9BbHBoYW51bWVyaWMoW3JvdywgY29sXSk7XG4gICAgICAgIHZhbGlkQ29vcmRpbmF0ZXMucHVzaChhbHBoYW51bWVyaWNDb29yZGluYXRlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWRDb29yZGluYXRlcztcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGNvbnZlcnRUb0luZGljZXMsXG4gICAgY29udmVydFRvQWxwaGFudW1lcmljLFxuICAgIGdldEFsbFZhbGlkQ29vcmRpbmF0ZXMsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgY29uc3QgQXBwSGVscGVycyA9ICgoKSA9PiB7XG4gIGNvbnN0IHNoaXBUeXBlcyA9IFtcbiAgICB7IHR5cGU6IFwiY2FycmllclwiLCBsZW5ndGg6IDUgfSxcbiAgICB7IHR5cGU6IFwiYmF0dGxlc2hpcFwiLCBsZW5ndGg6IDQgfSxcbiAgICB7IHR5cGU6IFwiZGVzdHJveWVyXCIsIGxlbmd0aDogMyB9LFxuICAgIHsgdHlwZTogXCJzdWJtYXJpbmVcIiwgbGVuZ3RoOiAzIH0sXG4gICAgeyB0eXBlOiBcInBhdHJvbCBib2F0XCIsIGxlbmd0aDogMiB9LFxuICBdO1xuXG4gIGNvbnN0IHRvZ2dsZU1vZGFsID0gKG1vZGFsLCBjaG9pY2UpID0+IHtcbiAgICBjb25zdCB0b2dnbGVkTW9kYWwgPSBtb2RhbDtcblxuICAgIGNvbnN0IG92ZXJsYXkgPSBtb2RhbC5jbG9zZXN0KFwiLm92ZXJsYXlcIik7XG4gICAgY29uc3QgZGlzcGxheVZhbHVlID0gY2hvaWNlID09PSBcInNob3dcIiA/IFwiZmxleFwiIDogXCJub25lXCI7XG5cbiAgICBvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5VmFsdWU7XG4gICAgdG9nZ2xlZE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5VmFsdWU7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBzaGlwVHlwZXMsXG4gICAgdG9nZ2xlTW9kYWwsXG4gIH07XG59KSgpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18oMzgwKTtcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNzc2KTtcbiJdLCJuYW1lcyI6WyJjb250YWluZXJFbGVtZW50IiwiY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJyb3ciLCJjb2wiLCJjb29yZGluYXRlIiwiY29udmVydFRvQWxwaGFudW1lcmljIiwic3F1YXJlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJhcHBlbmRDaGlsZCIsImV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJsaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudFR5cGUiLCJoYW5kbGVyIiwid2lubmVyIiwiY2xhc3NOYW1lIiwicGxheWVyR2FtZWJvYXJkIiwiY29tcHV0ZXJHYW1lYm9hcmQiLCJjb21wdXRlciIsImN1cnJlbnRTaGlwSW5kZXgiLCJzaGlwUGxhY2VtZW50TW9kZSIsImlzVmVydGljYWwiLCJwbGF5ZXJBdHRhY2siLCJlIiwidGFyZ2V0IiwiZ2V0QXR0YWNrZWRDb29yZGluYXRlcyIsImluY2x1ZGVzIiwicmVjZWl2ZUF0dGFjayIsImFsbFNoaXBzU3VuayIsInRvZ2dsZU1vZGFsIiwiYXR0YWNrIiwibGFzdEhpdENvb3JkaW5hdGUiLCJjdXJyZW50RGlyZWN0aW9uIiwiYXR0YWNrZWRTaGlwIiwiY29uc29sZSIsImxvZyIsImNvbXB1dGVyQXR0YWNrIiwicm90YXRlU2hpcHMiLCJsZW5ndGgiLCJzaGlwVHlwZXMiLCJzdGFydFJvdyIsInN0YXJ0Q29sIiwiY29udmVydFRvSW5kaWNlcyIsIkFycmF5IiwiZnJvbSIsIl8iLCJpIiwiaW5pdGlhbFNxdWFyZSIsImhvdmVyZWRTcXVhcmUiLCJyZW1vdmUiLCJzaGlwQ29vcmRpbmF0ZXMiLCJzaGlwIiwicGxhY2VTaGlwIiwic2hpcFR5cGUiLCJncmlkU2l6ZSIsImNvb3JkaW5hdGVzIiwicGxhY2VkIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiZ2V0U2hpcENvb3JkaW5hdGVzIiwiY29udmVydGVkQ29vcmRpbmF0ZSIsInBsYWNlQ29tcHV0ZXJTaGlwcyIsInNldFRpbWVvdXQiLCJuZXh0U2hpcFR5cGUiLCJ0eXBlIiwiaW5pdCIsInJlc2V0IiwiY2xlYXJTZXQiLCJTaGlwRmFjdG9yeSIsImhpdHMiLCJoaXQiLCJpc1N1bmsiLCJHYW1lYm9hcmRGYWN0b3J5IiwiZ3JpZCIsImZpbGwiLCJhdHRhY2tlZENvb3JkaW5hdGVzIiwibWlzc2VkQXR0YWNrcyIsImdldFNoaXBzIiwic2hpcHMiLCJjZWxsIiwicHVzaCIsImdldEdyaWQiLCJ3aXRoaW5Cb3VuZGFyaWVzIiwiZXZlcnkiLCJjb25mbGljdHMiLCJzb21lIiwiYWRqYWNlbnRDb25mbGljdHMiLCJhZGpSb3ciLCJhZGpDb2wiLCJzaGlwSW5mbyIsImdldEFsbFNoaXBzIiwiY29sdW1uTGV0dGVyIiwicm93TnVtYmVyIiwicGFyc2VJbnQiLCJjaGFyQ29kZUF0IiwiZ2V0TWlzc2VkQXR0YWNrcyIsInJvd0luZGV4IiwiY29sSW5kZXgiLCJQbGF5ZXJGYWN0b3J5IiwibmFtZSIsIlNldCIsImdldE5leHRDb29yZGluYXRlSW5EaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJjb2xMZXR0ZXIiLCJuZXh0Um93IiwibmV4dENvbCIsImdldE5leHREaXJlY3Rpb25zIiwiZGlyZWN0aW9ucyIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImoiLCJlbmVteUdhbWVib2FyZCIsInZhbGlkQ29vcmRpbmF0ZXMiLCJnZXRBbGxWYWxpZENvb3JkaW5hdGVzIiwiZGlyZWN0aW9uc1RvVHJ5IiwiaGFzIiwiZ2V0QXR0YWNrZWRTZXQiLCJjbGVhciIsIkZhY3RvcnlIZWxwZXJzIiwiY29sdW1uIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwic2xpY2UiLCJhbHBoYW51bWVyaWNDb29yZGluYXRlIiwiQXBwSGVscGVycyIsIm1vZGFsIiwiY2hvaWNlIiwidG9nZ2xlZE1vZGFsIiwiZGlzcGxheVZhbHVlIiwiY2xvc2VzdCIsInN0eWxlIiwiZGlzcGxheSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=